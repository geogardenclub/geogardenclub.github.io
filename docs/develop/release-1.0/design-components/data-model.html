<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-develop/release-1.0/design-components/data-model" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.3.2">
<title data-rh="true">Data Model | Geo Garden Club</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://geogardenclub.github.io/img/logos/png/wordmark.png"><meta data-rh="true" name="twitter:image" content="https://geogardenclub.github.io/img/logos/png/wordmark.png"><meta data-rh="true" property="og:url" content="https://geogardenclub.github.io/docs/develop/release-1.0/design-components/data-model"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Data Model | Geo Garden Club"><meta data-rh="true" name="description" content="This page explains the data model (i.e. the set of entities and their relationships) for GGC, along with a rationale for the design decisions that we&#x27;ve made along the way."><meta data-rh="true" property="og:description" content="This page explains the data model (i.e. the set of entities and their relationships) for GGC, along with a rationale for the design decisions that we&#x27;ve made along the way."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://geogardenclub.github.io/docs/develop/release-1.0/design-components/data-model"><link data-rh="true" rel="alternate" href="https://geogardenclub.github.io/docs/develop/release-1.0/design-components/data-model" hreflang="en"><link data-rh="true" rel="alternate" href="https://geogardenclub.github.io/docs/develop/release-1.0/design-components/data-model" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Geo Garden Club RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Geo Garden Club Atom Feed"><link rel="stylesheet" href="/assets/css/styles.99b23296.css">
<script src="/assets/js/runtime~main.469e2cb7.js" defer="defer"></script>
<script src="/assets/js/main.4e4b6550.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_gu5v" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logos/png/icon2.png" alt="Geo Garden Club" class="themedComponent_ZRzL themedComponent--light_dGsa"><img src="/img/logos/png/icon2.png" alt="Geo Garden Club" class="themedComponent_ZRzL themedComponent--dark_pzCA"></div><b class="navbar__title text--truncate">Geo Garden Club</b></a><a class="navbar__item navbar__link" href="/docs/home/welcome">About</a><a class="navbar__item navbar__link" href="/docs/user-guide/overview">User Guide</a></div><div class="navbar__items navbar__items--right"><div class="toggle_kWbt colorModeToggle_GwZs"><button class="clean-btn toggleButton_fOL9 toggleButtonDisabled_STpu" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_DCeJ"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_DFgp"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_IP3a"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_IbdI"><div class="docsWrapper_JGIH"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_SdI4" type="button"></button><div class="docRoot_eRbX"><aside class="theme-doc-sidebar-container docSidebarContainer_Ta75"><div class="sidebarViewport_fgog"><div class="sidebar_oDHW"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_vPEQ"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/develop">Welcome</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/develop/roadmap">Roadmap</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/develop/milestones">Milestones</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/develop/onboarding">Onboarding</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/develop/mockup/design">Mockup</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/develop/release-1.0/goals">Release 1.0 (Beta)</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/develop/release-1.0/goals">Goals</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/develop/release-1.0/installation">Installation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/develop/release-1.0/scripts">Scripts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/develop/release-1.0/cvp">Core Value Propositions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/develop/release-1.0/deployment">Deployment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/develop/release-1.0/testing">Testing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/develop/release-1.0/backups">Backups</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/develop/release-1.0/architecture">Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/develop/release-1.0/coding-standards">Coding Standards</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/develop/release-1.0/beta-test-feedback">Release 1.0 (Beta) Feedback</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/develop/release-1.0/design-components/data-model">Design Components</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/develop/release-1.0/design-components/data-model">Data Model</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/develop/release-1.0/design-components/badges">Badges</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/develop/release-1.0/design-components/input-fields">GGC Input Fields</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/develop/release-1.0/design-components/with-widgets">&quot;With&quot; widgets</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/develop/release-1.0/design-components/data-mutation">Data Mutation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/develop/release-1.0/design-components/test-design">Test Design</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/develop/release-2.0/chapterzipmap">Release 2.0 (Public)</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_lg0V"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_nDJs"><div class="docItemContainer_OGiL"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_k3Z9" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_JACu"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Release 1.0 (Beta)</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Design Components</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Data Model</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_QCOD theme-doc-toc-mobile tocMobile_N0YI"><button type="button" class="clean-btn tocCollapsibleButton_pHwF">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Data Model</h1>
<p>This page explains the data model (i.e. the set of entities and their relationships) for GGC, along with a rationale for the design decisions that we&#x27;ve made along the way.</p>
<h2 class="anchor anchorWithStickyNavbar_FNw8" id="entities">Entities<a href="#entities" class="hash-link" aria-label="Direct link to Entities" title="Direct link to Entities">​</a></h2>
<p>In GGC, &quot;entity&quot; refers to the fundamental forms of persistent data objects. Examples of entities are: &quot;Chapter&quot;, &quot;Garden&quot;, &quot;Gardener&quot;, &quot;Observation&quot;, etc.</p>
<p>Each entity is defined as a set of typed fields.</p>
<p>Entities are persisted through a set of Firebase collections. In general, each entity is a document that is stored in a corresponding collection: all of the Chapter entity documents are stored in a Firebase collection called Chapters, all of the Gardener entity documents are stored in a Firebase collection called Gardeners.</p>
<p>The GGC app implements a set of Dart &quot;domain&quot; classes that mirror these Firebase collections, so (for example) there is a Dart class called &quot;Chapter&quot; (that defines the structure of a Chapter entity), and a Dart class called &quot;ChapterCollection&quot; (which holds a list of Chapter entity instances and provides operations upon them).</p>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="entity-hierarchy">Entity Hierarchy<a href="#entity-hierarchy" class="hash-link" aria-label="Direct link to Entity Hierarchy" title="Direct link to Entity Hierarchy">​</a></h4>
<p>The following diagram provides a high-level overview of the entities in the data model organized into a three level hierarchy:</p>
<img style="border-style:solid" src="/img/develop/release-1.0/data-model/entity-overview.png">
<p>The diagram separates the entities into three categories:</p>
<ol>
<li>&quot;Global-level&quot; entities.  These entities are defined at the &quot;system-level&quot;. In other words, they can only be changed by GGC developers, and changes to these entities might involve changes to the source code, the database, and possibly redeployment of the app.</li>
<li>&quot;Chapter-level&quot; entities. These are &quot;top-level&quot; entities for any given chapter. These entities all include a chapterID field. Each user is always associated with a single Chapter, and thus can only &quot;see&quot; the entities with a matching chapterID. The Chapter-level entities are visible only to the entities in their Chapter. They are normally downloaded and cached in the client application upon login.</li>
<li>&quot;Garden-level&quot; entities. These entities are all specific to a single Garden, and include both a chapterID and a gardenID. Garden-level entities are only visible to entities within their Chapter. In addition, Garden-level entities are only downloaded and cached in the client application when the user explicitly navigates to a Garden&#x27;s details page.</li>
</ol>
<p>This diagram can also be used to understand the relative numbers of entities that a given client must manipulate. Each of the &quot;Global-level&quot; entity will have dozens to hundreds of instances, and so it is practical for the client application to cache them locally without a large performance impact.</p>
<p>Since each User is associated with a single Chapter, the number of &quot;Chapter-level&quot; entity instances visible to a User is not expected to exceed several hundred to a thousand. This means it is practical for the client application to cache all &quot;visible&quot; Chapter-level entities locally.</p>
<p>We expect each User to be associated with one to a dozen Gardens. Each Garden might have hundreds to thousands of Plantings. This means it is practical for the client application to cache the &quot;Garden-level&quot; entities that they are associated with.</p>
<p>The goal of this design is to create &quot;chapter-level&quot; and &quot;garden-level&quot; namespaces, such that GeoGardenClub can scale to hundreds of Chapters, where each Chapter contains hundreds of gardens, and where each Garden contains hundreds of Plantings (and other Garden-specific entities), all while providing a fast, intuitive, and responsive application for each user. Our design means that the GGC database can grow to millions of documents while individual client apps require access to only thousands of documents.<br>
<!-- -->This design does have a potential problem: what if a Chapter becomes wildly popular and grows to many hundreds of members? It is possible that the performance of the client application can degrade if the number of members (and thus gardens) in a single Chapter becomes too large.</p>
<p>To address this potential problem, the data model is designed to facilitate partitioning of large Chapters into multiple smaller Chapters in the event that the number of members becomes too large. For example, the initial definition of a Chapter may comprise 8 postal (zip) codes, corresponding to all the postal codes in that country. But if that Chapter becomes too large, we could split it into two Chapters, each defined with 4 postal codes (or one with 3 postal codes and one with 5 postal codes, depending upon the concentration of members in each postal code).  Our data model does not currently allow Chapter definition &quot;below&quot; the level of a postal code, so the smallest possible Chapter in GeoGardenClub would be one defined by a single postal code.</p>
<p>We foresee an annual end-of-year review, where we see if any Chapters are reaching a size where it would be appropriate to split them up into smaller Chapters. By doing it in Winter (at least for the Northern Hemisphere), such Chapter reorganization should have less impact on the Gardeners.</p>
<p>To facilitate Chapter splitting, the IDs associated with Garden-level entities do not encode the chapterID, but instead the two character (alpha2) country code and the postal code. This allows Garden-level data to more easily migrate to new Chapters without needing to change their entity IDs.</p>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="entity-dependencies">Entity dependencies<a href="#entity-dependencies" class="hash-link" aria-label="Direct link to Entity dependencies" title="Direct link to Entity dependencies">​</a></h4>
<p>The following diagram presents an alternative perspective on the entities. In this case, there is a line between two entities when there is a relationship between them; in other words, one of the entities refers to the other with a foreign key (i.e. ID) field.</p>
<img style="border-style:solid" src="/img/develop/release-1.0/data-model/entity-dependencies.png">
<p>The primary goal of this diagram is to make it clear that there is a fairly rich set of dependencies among the entities in this data model.</p>
<p>This is a positive thing, because it means that there are many different and interesting ways to &quot;slice and dice&quot; the data.</p>
<p>It also illustrates why we have chosen to implement the data model as a set of top-level collections. The many different relationships argue against the use of subcollections.</p>
<p>Let&#x27;s now turn to a more detailed description of the entities in the data model.</p>
<h3 class="anchor anchorWithStickyNavbar_FNw8" id="chapter">Chapter<a href="#chapter" class="hash-link" aria-label="Direct link to Chapter" title="Direct link to Chapter">​</a></h3>
<p>The Chapter entity defines a geographic region based on a country (represented as a two character (alpha-2) country code), and a set of one or more postal (zip) codes.  GGC ensures that Chapter instances partition the world: every pair of (country code, postal code) is mapped to exactly one Chapter.</p>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="chapterid-management">ChapterID management<a href="#chapterid-management" class="hash-link" aria-label="Direct link to ChapterID management" title="Direct link to ChapterID management">​</a></h4>
<p>A Firebase collection called ChapterZipMap will provide a default mapping of US postal (i.e. zip) codes to chapterIDs.  This mapping initially defines a one-to-one correspondence between US counties and GGC Chapters.</p>
<p>Outside of the US, each (country code, postal code) pair will be its own Chapter. This is not optimal but it provides a way to make GGC immediately available to users outside the US without constructing a world-wide ChapterPostalCodeMap. We can add this later without any change to the data model.</p>
<p>Unlike most other entity IDs, the complete set of chapterIDs is defined in advance in GGC. In other words, we can compute all of the chapterIDs on earth, and they do not depend upon the number of users or their behavior. In contrast, there is no <em>a priori</em> limit to the number of (say) Planting IDs.</p>
<p>While chapterIDs are finite, they are not necessarily <em>fixed</em> in terms of their numbers and the geographic regions that they encompass. For US Chapters, we can change the set of chapters by changing the entries in the ChapterZipMap. For example, while our initial approach is to implement a one-to-one correspondence between US chapters and US counties, we could in future change the ChapterZipMap so that a single US county could have multiple Chapters, or multiple counties could be combined into a single Chapter, or some other approach. (Changing chapter geographic boundaries requires more than just changing the ChapterZipMap; the point here is that our representation does not lock us in to our initial definition for Chapters.) The only hard constraint is that each postal code is assigned to one and only one Chapter.</p>
<p>ChapterIDs have the format <code>chapter-&lt;country&gt;-&lt;chapterCode&gt;</code>.  In the case of a US Chapter, an example Chapter ID is: &quot;chapter-US-001&quot;.  In the case of a non-US Chapter, an example Chapter ID is &quot;chapter-CA-V6K1G8&quot;.</p>
<p>To support readability in this document, we will use US chapters and the chapterCodes will be numeric.</p>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="user-registration-and-chapter-assignment">User registration and chapter assignment<a href="#user-registration-and-chapter-assignment" class="hash-link" aria-label="Direct link to User registration and chapter assignment" title="Direct link to User registration and chapter assignment">​</a></h4>
<p>New user registration works as follows. If they supply &quot;US&quot; as their country code, then the system will query the ChapterZipMap collection to determine their chapterID based on the postal (zip) code that they also supply.  If no Chapter entity exists yet with that chapterID, it will be created with the chapterID provided by the ChapterZipMap collection.</p>
<p>If the new user supplies a non-US country code, then the ChapterZipMap is not consulted. Instead, the chapterID is defined as <code>chapter-&lt;country code&gt;-&lt;postal code&gt;</code>. If no Chapter entity exists yet corresponding to that ChapterID, then it will be created.</p>
<p>Note that <a href="https://tosbourn.com/list-of-countries-without-a-postcode/" target="_blank" rel="noopener noreferrer">some countries do not have a postal code</a>. In this case, we will create a default postal code (i.e. &quot;000&quot;) for those countries and not request it from the user if they select one of those countries. This implies that for those countries, there will be only one chapter for the entire country. Since most of those countries are pretty small, that seems like a reasonable design decision.</p>
<div class="theme-admonition theme-admonition-info admonition_LMjb alert alert--info"><div class="admonitionHeading_GGQ4"><span class="admonitionIcon_ifdW"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>The beta release works differently</div><div class="admonitionContent_pGk6"><p>The Beta release will only be distributed to users in Whatcom Country, WA, and so the registration mechanism will be simplified. See below for details.</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="chapterid-as-firebase-index">ChapterID as Firebase index<a href="#chapterid-as-firebase-index" class="hash-link" aria-label="Direct link to ChapterID as Firebase index" title="Direct link to ChapterID as Firebase index">​</a></h4>
<p>As will be seen, many entities contain a chapterID field.  When a client retrieves data from Firebase, it will normally request all of the documents where the chapterID field is the one associated with their chapter. This is the primary way in which GGC can scale. For this to work effectively, we must define an index on the chapterID field for all collections in which the entities have that field.</p>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="chapter-entity-representation">Chapter entity representation<a href="#chapter-entity-representation" class="hash-link" aria-label="Direct link to Chapter entity representation" title="Direct link to Chapter entity representation">​</a></h4>
<div class="language-dart codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-dart codeBlock_zHgq thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_RjmQ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">factory</span><span class="token plain"> </span><span class="token class-name">Chapter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">required </span><span class="token class-name">String</span><span class="token plain"> chapterID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;chapter-US-001&#x27;, or &#x27;chapter-CA-V6K1G8&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">              </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;Whatcom-WA&#x27;, or &#x27;CA-V6K1G8&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> countryCode</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">       </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;US&#x27;, &#x27;CA&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">List</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> postalCodes</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// [&#x27;98225&#x27;, &#x27;98226&#x27;], or [&#x27;V6K1GB&#x27;]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="projected-release-20-changes">Projected Release 2.0 changes<a href="#projected-release-20-changes" class="hash-link" aria-label="Direct link to Projected Release 2.0 changes" title="Direct link to Projected Release 2.0 changes">​</a></h4>
<p>In Release 2.0, users will be able to see information about Chapters other than their own. To implement this, we will expand the representation of the Chapter entity with &quot;cached&quot; information, perhaps the number of gardeners, the Chapter badges awarded to that chapter, and so forth. Release 2.0 might also include climate-related features, which might result in associating a list of hardiness zones with each Chapter entity.</p>
<h3 class="anchor anchorWithStickyNavbar_FNw8" id="user">User<a href="#user" class="hash-link" aria-label="Direct link to User" title="Direct link to User">​</a></h3>
<p>A User entity is created for all of the people who have created an account with the system.</p>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="users-vs-gardeners">Users vs Gardeners<a href="#users-vs-gardeners" class="hash-link" aria-label="Direct link to Users vs Gardeners" title="Direct link to Users vs Gardeners">​</a></h4>
<p>Note that all User entities will also have a Gardener entity, but not vice-versa: not all Gardener entities have a corresponding User entity. This is because commercial seed vendors won&#x27;t generally have an account on the system, but they are represented within the system as Gardener entities.</p>
<p>Every User is associated with a unique email address, which is their UserID. (Their email is also used for their gardenerID.)</p>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="userid-management">UserID management<a href="#userid-management" class="hash-link" aria-label="Direct link to UserID management" title="Direct link to UserID management">​</a></h4>
<p>UserIDs are the email addresses of the user. We obtain the email as part of registration.</p>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="user-onboarding">User onboarding<a href="#user-onboarding" class="hash-link" aria-label="Direct link to User onboarding" title="Direct link to User onboarding">​</a></h4>
<p>After a user successfully registers with the system using the Firebase authentication procedures, they are logged in.  Whenever a user logs in, the system checks to see if there is a User document associated with the email address of the currently logged in user. If there is no User document for that email, then the system displays an Onboarding screen.</p>
<p>The onboarding screen is essentially a form that must be successfully filled out in order for the logged in user to proceed to their home page (as well as to any other areas of the application).</p>
<p>The form provides fields for the user&#x27;s:</p>
<ul>
<li>Name</li>
<li>Username</li>
<li>Country</li>
<li>Postal (Zip) code</li>
</ul>
<p>In addition, the user can provide a picture at this time if they want.</p>
<div class="theme-admonition theme-admonition-info admonition_LMjb alert alert--info"><div class="admonitionHeading_GGQ4"><span class="admonitionIcon_ifdW"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Beta Release modifications</div><div class="admonitionContent_pGk6"><p>For the initial beta release:</p><ul>
<li>The country field will be a read-only drop-down and &quot;United States&quot; will be selected. It returns the alpha2 code for the United States (i.e. &quot;US&quot;)</li>
<li>The Postal (Zip) Code input field will be a pull-down list of postal codes associated with Whatcom, Washington.</li>
</ul><p>These modifications to the Onboarding screen guarantee that beta test users will be associated with the Whatcom-WA Chapter, and allow us to avoid the need to design and implement the ChapterZipMap and associated processing.</p></div></div>
<p>Once the form is successfully filled out, a User and Gardener document is created for that email address. If those documents are created successfully, then the application displays the Home screen for that User.</p>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="user-entity-representation">User entity representation<a href="#user-entity-representation" class="hash-link" aria-label="Direct link to User entity representation" title="Direct link to User entity representation">​</a></h4>
<div class="language-dart codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-dart codeBlock_zHgq thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_RjmQ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">factory</span><span class="token plain"> </span><span class="token class-name">User</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">required </span><span class="token class-name">String</span><span class="token plain"> userID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;johnson@hawaii.edu&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> chapterID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;chapter-US-001&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">           </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;Philip Johnson&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> username</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">       </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;@fiveoclockphil&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> country</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;US&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> postalCode</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">         </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;98225&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> uid</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;22e9fe1b-445c-4523-89c2-4450244f1959&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">String</span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> pictureURL</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">             </span><span class="token comment" style="color:#999988;font-style:italic">// null, or &#x27;https://firebasestorage.googleapis.com/v0/...&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_FNw8" id="gardener">Gardener<a href="#gardener" class="hash-link" aria-label="Direct link to Gardener" title="Direct link to Gardener">​</a></h3>
<p>There is one Gardener entity for each Chapter member and vendor in GGC.  This entity is designed to represent two distinct classes of gardeners:  (1) &quot;normal&quot; home gardeners (who are Chapter members) and (2) commercial seed vendors (who are not (normally) Chapter members).</p>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="chapter-members-vs-vendors">Chapter members vs Vendors<a href="#chapter-members-vs-vendors" class="hash-link" aria-label="Direct link to Chapter members vs Vendors" title="Direct link to Chapter members vs Vendors">​</a></h4>
<p>The benefit of having the Gardener entity represent both Chapter members as well as commercial seed vendors is that it results in a uniform mechanism in the app to support &quot;seed providers&quot;. Any Gardener (which can either be a normal home gardener or a commercial seed vendor) owns a Garden which contains Plantings which (may or may not) produce seeds that are available within the Chapter.</p>
<p>This does create some UI complexity, in that commercial seed vendors do not appear in the list of &quot;Gardeners&quot; and instead appear in the UI as &quot;Vendors&quot;. Underneath, however, commercial seed vendors will (like Chapter members) have a Gardener entity, a Garden entity, and for each seed that someone in the Chapter uses, there will be a Seed entity and a Planting entity. (To as great an extent as possible, all of this Vendor entity management is managed internally and hidden from the UI.)</p>
<p>The Gardener entity indicates that it is representing a Vendor by setting the isVendor flag to true. If that flag is true, then the vendorName, vendorShortName, and vendorUrl fields must be non-null.</p>
<p>The Vendors in a Chapter are crowd-sourced, which means any Chapter member can create a new Vendor. When a Vendor is created, they are given the country and postal code of the member who defined them. This is necessary so that their implicitly defined Garden and Plantings can have Chapter-appropriate ID strings.</p>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="cached-values">Cached values<a href="#cached-values" class="hash-link" aria-label="Direct link to Cached values" title="Direct link to Cached values">​</a></h4>
<p>We want to provide information about Gardeners such as the crops and varieties that they are growing in the Index screens, and for performance reasons, we want to provide this information without having to retrieve all of the Planting instances associated with their gardens. To do this, we &quot;cache&quot; the cropIDs and varietyIDs associated with this gardener in this entity.</p>
<p>By &quot;associated&quot;, we mean the crops and varieties in the garden(s) for which this gardener is an owner.</p>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="badge-attestations">Badge attestations<a href="#badge-attestations" class="hash-link" aria-label="Direct link to Badge attestations" title="Direct link to Badge attestations">​</a></h4>
<p>Certain badges require Gardeners to &quot;attest&quot; to having performed activities. The Gardener entity contains an attestations field that holds strings indicating what has been attested to.</p>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="gardenerid-management">GardenerID management<a href="#gardenerid-management" class="hash-link" aria-label="Direct link to GardenerID management" title="Direct link to GardenerID management">​</a></h4>
<p>GardenerIDs are the email addresses of the gardener. In the case of registered users, the UserID is the same as the GardenerID.  In the case of Vendors, the GardenerID is the contact email for the vendor company (for example, <a href="mailto:info@johnnyseeds.com" target="_blank" rel="noopener noreferrer">info@johnnyseeds.com</a>).</p>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="gardener-entity-representation">Gardener entity representation<a href="#gardener-entity-representation" class="hash-link" aria-label="Direct link to Gardener entity representation" title="Direct link to Gardener entity representation">​</a></h4>
<div class="language-dart codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-dart codeBlock_zHgq thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_RjmQ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">factory</span><span class="token plain"> </span><span class="token class-name">Gardener</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">required </span><span class="token class-name">String</span><span class="token plain"> gardenerID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">             </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;johnson@hawaii.edu&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> chapterID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">               </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;chapter-US-001&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">List</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> cachedCropIDs</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">     </span><span class="token comment" style="color:#999988;font-style:italic">// [&#x27;crop-US-001-203-9987&#x27;]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">List</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> cachedVarietyIDs</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// [&#x27;variety-US-001-305-8765&#x27;]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> country</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">                 </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;US&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> postalCode</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">              </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;98225&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">List</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> attestations</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// [&#x27;PermacultureWorkshop&#x27;]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token metadata function" style="color:#d73a49">@Default</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> bool isVendor</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">           </span><span class="token comment" style="color:#999988;font-style:italic">// true, or false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">String</span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> vendorName</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">                      </span><span class="token comment" style="color:#999988;font-style:italic">// null, or &#x27;Johnnys Seeds and Supplies&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">String</span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> vendorShortName</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">                 </span><span class="token comment" style="color:#999988;font-style:italic">// null, or &#x27;Johnnys&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">String</span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> vendorURL</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">       </span><span class="token comment" style="color:#999988;font-style:italic">// true, or false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_FNw8" id="garden">Garden<a href="#garden" class="hash-link" aria-label="Direct link to Garden" title="Direct link to Garden">​</a></h3>
<p>The Garden entity represents a plot of land (or maybe even just some pots) that can hold Plantings over one or more years.</p>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="gardenid-management">GardenID management<a href="#gardenid-management" class="hash-link" aria-label="Direct link to GardenID management" title="Direct link to GardenID management">​</a></h4>
<p>GardenIDs are generated dynamically when a Chapter member defines a new Garden or when a Chapter member defines a new Vendor (which implicitly results in the creation of a new Garden).</p>
<p>GardenIDs have the format <code>garden-&lt;country&gt;-&lt;postalCode&gt;-&lt;gardenNum&gt;-&lt;millis&gt;</code>. Please see the <a href="#ids">ID Section</a> for details regarding our approach to ID management.</p>
<p>The GardenID embeds the country code and postal code associated with the ownerID. Note that this might not be the same postal code as the one associated with the physical location of the garden!  We do this in order to ensure that if a Chapter&#x27;s set of postal codes is reorganized, then the Gardens owned by a Gardener will always end up in the same Chapter as their owner.</p>
<p>To support readability in this document and initial development, the gardenNum starts at &quot;101&quot; for each chapter.</p>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="field-notes">Field Notes<a href="#field-notes" class="hash-link" aria-label="Direct link to Field Notes" title="Direct link to Field Notes">​</a></h4>
<p>The form field for vendor name entry imposes validation criteria. See <a href="https://github.com/geogardenclub/ggc_app/blob/main/lib/features/common/input-fields/validators.dart" target="_blank" rel="noopener noreferrer">validators.dart</a> for details.</p>
<p>The Garden name must be unique within a Chapter.</p>
<p>The cachedYears value is based on the StartDate for the Plantings associated with the Garden.</p>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="cached-values-1">Cached values<a href="#cached-values-1" class="hash-link" aria-label="Direct link to Cached values" title="Direct link to Cached values">​</a></h4>
<p>Each Garden entity caches the CropIDs, VarietyIDs, years, and the number of Plantings. This allows the Index screens to show this information about Gardens without needing to retrieve and process Plantings.</p>
<p>In addition, whenever there is a change to the Plantings associated with this Garden, the lastUpdated field is set to the current time.  This allows the community to see which Gardens in their Chapter are active.</p>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="badge-attestations-1">Badge attestations<a href="#badge-attestations-1" class="hash-link" aria-label="Direct link to Badge attestations" title="Direct link to Badge attestations">​</a></h4>
<p>Certain badges require Gardeners to &quot;attest&quot; to their Garden having certain properties. The Garden entity contains an attestations field with strings indicating the properties that they have attested to.</p>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="garden-entity-representation">Garden entity representation<a href="#garden-entity-representation" class="hash-link" aria-label="Direct link to Garden entity representation" title="Direct link to Garden entity representation">​</a></h4>
<div class="language-dart codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-dart codeBlock_zHgq thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_RjmQ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">factory</span><span class="token plain"> </span><span class="token class-name">Garden</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">required </span><span class="token class-name">String</span><span class="token plain"> gardenID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">                </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;garden-US-98225-101-4567&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> chapterID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">                </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;chapter-US-001&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">                     </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;Kale is for Kids&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> ownerID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">                  </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;jessie@gmail.com&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">List</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> cachedCropIDs</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// [&#x27;crop-US-001-201-9876&#x27;]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">List</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> cachedVarietyIDs</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">// [&#x27;variety-US-001-302-7865&#x27;]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">List</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics">int</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> cachedYears</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">           </span><span class="token comment" style="color:#999988;font-style:italic">// [2023, 2022]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required int cachedNumPlantings</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic">// 231</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">List</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> attestations</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// [&#x27;ClimateVictory&#x27;, &#x27;PesticideFree&#x27;, &#x27;CommunityOrSchool&#x27;]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">String</span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> pictureURL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">                       </span><span class="token comment" style="color:#999988;font-style:italic">// null, &#x27;https://firebasestorage.googleapis.com/v0/...&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">String</span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> plotPlanURL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">                      </span><span class="token comment" style="color:#999988;font-style:italic">// null, &#x27;https://firebasestorage.googleapis.com/v0/...&#x27; </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">DateTime</span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> lastUpdate</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">                    </span><span class="token comment" style="color:#999988;font-style:italic">// null (for vendors), &#x27;2023-03-19T12:19:14.164090&#x27;            </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token metadata function" style="color:#d73a49">@Default</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> bool isVendor</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">// true, false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_FNw8" id="editor">Editor<a href="#editor" class="hash-link" aria-label="Direct link to Editor" title="Direct link to Editor">​</a></h3>
<p>The owner of a Garden can add other Chapter members as &quot;editors&quot;, which enables those users to edit the Plantings and other information associated with a Garden.</p>
<p>There are some things Editors cannot do. For example, they cannot delete the garden. Only the owner can do that.</p>
<p>To earn a Gardener Badge, only the data associated with Gardens that you own is used. Being an Editor on a Garden does not support Badge processing.</p>
<p>In addition, when displaying the Crops and Varieties associated with a Gardener, only those Crops and Varieties for the Gardens that you own are displayed.  The Crops and Varieties for Gardens for which you are an Editor are not included.</p>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="editorid-management">EditorID management<a href="#editorid-management" class="hash-link" aria-label="Direct link to EditorID management" title="Direct link to EditorID management">​</a></h4>
<p>Editor entities are created or deleted when the owner of a Garden edits the Editor field of the Garden Details form.</p>
<p>EditorIDs have the format <code>editor-&lt;country&gt;-&lt;postalCode&gt;-&lt;gardenNum&gt;-&lt;editorNum&gt;-&lt;millis&gt;</code>. Please see the <a href="#ids">ID Section</a> for details regarding our approach to ID management.</p>
<p>EditorNums start at 001 for each garden.</p>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="editor-entity-representation">Editor entity representation<a href="#editor-entity-representation" class="hash-link" aria-label="Direct link to Editor entity representation" title="Direct link to Editor entity representation">​</a></h4>
<div class="language-dart codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-dart codeBlock_zHgq thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_RjmQ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">factory</span><span class="token plain"> </span><span class="token class-name">Editor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">required </span><span class="token class-name">String</span><span class="token plain"> editorID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">         </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;editor-US-98225-102-001-5231&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> gardenID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;garden-US-98225-102-6789&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> chapterID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">         </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;chapter-US-001&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> gardenerID</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;johnson@hawaii.edu&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_FNw8" id="bed">Bed<a href="#bed" class="hash-link" aria-label="Direct link to Bed" title="Direct link to Bed">​</a></h3>
<p>Each Garden consists of a number of Beds. An owner can edit the name of an existing Bed, and can add a new Bed to a Garden, but cannot delete a Bed if there are any Plantings associated with it.</p>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="bedid-management">BedID management<a href="#bedid-management" class="hash-link" aria-label="Direct link to BedID management" title="Direct link to BedID management">​</a></h4>
<p>BedIDs have the format <code>bed-&lt;country&gt;-&lt;postalCode&gt;-&lt;gardenNum&gt;-&lt;bedNum&gt;-&lt;millis&gt;</code>. Please see the <a href="#ids">ID Section</a> for details regarding our approach to ID management.</p>
<p>BedNums start at 001 for each garden.</p>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="bed-entity-representation">Bed entity representation<a href="#bed-entity-representation" class="hash-link" aria-label="Direct link to Bed entity representation" title="Direct link to Bed entity representation">​</a></h4>
<div class="language-dart codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-dart codeBlock_zHgq thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_RjmQ"><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">factory</span><span class="token plain"> </span><span class="token class-name">Bed</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">required </span><span class="token class-name">String</span><span class="token plain"> bedID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;bed-US-98225-101-001-5634&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> chapterID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">       </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;chapter-US-001&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> gardenID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;garden-US-98225-101-6789&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;02&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">String</span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> gardenerID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">              </span><span class="token comment" style="color:#999988;font-style:italic">// The owner of the garden, i.e. &#x27;johnson@hawaii.edu&#x27;.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">              </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_FNw8" id="family">Family<a href="#family" class="hash-link" aria-label="Direct link to Family" title="Direct link to Family">​</a></h3>
<p>The Family entity specifies the botanical family associated with one or more Crops (and implicitly, Varieties). For example, the &quot;Nightshade&quot; family groups together Tomatoes, Potatoes, and Peppers. Each Crop is associated with exactly one Family.</p>
<p>Family data is useful to facilitate planning issues including crop rotation and companion planting. However, in Release 1.0, we do not provide any explicit support for rotation or companion planning.</p>
<p>The Family entity is a &quot;global&quot; collection in GGC. In other words, it does not include a ChapterID; every Chapter will download this collection, and it cannot be edited except by developers.</p>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="familyid-management">FamilyID management<a href="#familyid-management" class="hash-link" aria-label="Direct link to FamilyID management" title="Direct link to FamilyID management">​</a></h4>
<p>FamilyIDs have the format <code>family-&lt;familyNum&gt;</code>. The set of Family entity documents is defined in advance by GGC developers, and editing this collection requires direct interaction with the database.</p>
<p>FamilyNums start at 001.</p>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="family-entity-representation">Family entity representation<a href="#family-entity-representation" class="hash-link" aria-label="Direct link to Family entity representation" title="Direct link to Family entity representation">​</a></h4>
<div class="language-dart codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-dart codeBlock_zHgq thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_RjmQ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">factory</span><span class="token plain"> </span><span class="token class-name">Family</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">required </span><span class="token class-name">String</span><span class="token plain"> familyID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">       </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;family-001&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> formal</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;Amryllidaceae&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> common</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;Allium&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> examples</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;onion, leek, garlic, shallot&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_FNw8" id="crop">Crop<a href="#crop" class="hash-link" aria-label="Direct link to Crop" title="Direct link to Crop">​</a></h3>
<p>The Crop entity specifies a type of plant independent of its Variety. For example, &quot;Tomato&quot; is a Crop, while &quot;Big Boy Tomato&quot; is a specific Variety of Tomato.</p>
<p>Each Crop is associated with exactly one Family entity.  A Crop can be associated with many Varieties.</p>
<p>Each Chapter is responsible for &quot;crowd-sourcing&quot; the set of Crop entities.  This puts on burden on early Chapter members to define Crops. We estimate that most chapters will need to define between 50 and 100 Crop entities.</p>
<p>The reason we do not provide a global collection of Crops is because a single collection containing all the crops grown world-wide would have several hundred entities, many of which would not be relevant to the Chapter. We want each Chapter&#x27;s UI to show only the Crops (and Varieties, and Seeds) that are <em>actually being grown</em> in that Chapter.  We hypothesize that the benefits of focusing on what is actually being grown outweigh the cost of crowd-sourced management.</p>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="cropid-management">CropID management<a href="#cropid-management" class="hash-link" aria-label="Direct link to CropID management" title="Direct link to CropID management">​</a></h4>
<p>CropIDs have the format <code>crop-&lt;country&gt;-&lt;chapterCode&gt;-&lt;cropNum&gt;-&lt;millis&gt;</code>. Please see the <a href="#ids">ID Section</a> for details regarding our approach to ID management.</p>
<p>CropIDs embed the chapter&#x27;s country code and chapterCode. (ChapterCodes could be a number like &#x27;001&#x27; in the case of a US Chapter, or a postal code like &#x27;VNZ76T&#x27; in the case of a non-US chapter.)</p>
<p>In the event that a Chapter is divided into two or more smaller chapters, each of the new Chapters needs a copy of the Crop collection where the IDs have been changed to embed the new chapterCode.  This will require a pass through all of the Garden-level entities to update the value of their cropID fields to the new string value.</p>
<p>CropNums start at 201 for each chapter.</p>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="crop-entity-representation">Crop entity representation<a href="#crop-entity-representation" class="hash-link" aria-label="Direct link to Crop entity representation" title="Direct link to Crop entity representation">​</a></h4>
<div class="language-dart codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-dart codeBlock_zHgq thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_RjmQ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">factory</span><span class="token plain"> </span><span class="token class-name">Crop</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">required </span><span class="token class-name">String</span><span class="token plain"> cropID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;crop-US-001-201-3452&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> chapterID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;chapter-US-001&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> familyID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">       </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;family-001&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> name</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">           </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;Tomato&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_FNw8" id="variety">Variety<a href="#variety" class="hash-link" aria-label="Direct link to Variety" title="Direct link to Variety">​</a></h3>
<p>Variety is a specific kind of Crop which can actually be grown, i.e. it has seeds. For example, a seed packet such as &quot;Tomato (Sun Gold)&quot; specifies the crop (&quot;Tomato&quot;) and the Variety (&quot;Sun Gold&quot;).</p>
<p>In some cases, the Variety associated with a given seed might not be known. In those cases, by convention, the Variety name can be specified as &quot;Unknown&quot;. (It is not, however, appropriate to create a Crop called &quot;Unknown&quot;. If you plant some seeds that you know absolutely nothing about, you should wait until they germinate and you can identify their Crop before you can enter data about it into GGC!)</p>
<p>Note that it is possible (and common) for multiple gardeners (either home or commercial vendors) to produce seeds of the same Variety.</p>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="varietyid-management">VarietyID management<a href="#varietyid-management" class="hash-link" aria-label="Direct link to VarietyID management" title="Direct link to VarietyID management">​</a></h4>
<p>VarietyIDs have the format <code>variety-&lt;country&gt;-&lt;chapterCode&gt;-&lt;varietyNum&gt;-&lt;millis&gt;</code>. Please see the <a href="#ids">ID Section</a> for details regarding our approach to ID management.</p>
<p>Like CropIDs, VarietyIDs embed the country code and chapterCode.  (Like CropIDs, ChapterCodes could be a number like &#x27;001&#x27; in the case of a US Chapter, or a postal code like &#x27;VNZ76T&#x27; in the case of a non-US chapter.)</p>
<p>In the event that a Chapter is divided into two or more smaller chapters, each of the new Chapters needs a copy of the Variety collection with the updated chapterCode.  This will require a pass through all of the Garden-level entities to update their varietyID fields to the new string value.</p>
<p>VarietyNums start at 301 for each chapter.</p>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="field-notes-1">Field notes<a href="#field-notes-1" class="hash-link" aria-label="Direct link to Field notes" title="Direct link to Field notes">​</a></h4>
<p>Note that we cache the Crop Name because it will rarely, if ever, change and it is useful to have it in the Variety document so that we can return the full name without needing the Crop collection.</p>
<p>That implies, however, that if the name of a Crop is ever changed, then we must find all of the Variety documents associated with that cropID and update the cachedCropName field. This is an acceptable trade-off.</p>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="variety-entity-representation">Variety entity representation<a href="#variety-entity-representation" class="hash-link" aria-label="Direct link to Variety entity representation" title="Direct link to Variety entity representation">​</a></h4>
<div class="language-dart codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-dart codeBlock_zHgq thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_RjmQ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">factory</span><span class="token plain"> </span><span class="token class-name">Variety</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">required </span><span class="token class-name">String</span><span class="token plain"> varietyID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;variety-US-001-302-7654&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> chapterID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">       </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;chapter-US-001&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> cropID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;crop-US-001-203-2354&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> cachedCropName</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;Asparagus&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  bool</span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> isGold</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">                    </span><span class="token comment" style="color:#999988;font-style:italic">// If present and set to true, the variety has &quot;gold&quot; status.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> name</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;Jersey Knight&#x27; </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_FNw8" id="planting">Planting<a href="#planting" class="hash-link" aria-label="Direct link to Planting" title="Direct link to Planting">​</a></h3>
<p>A Planting represents a set of plants of the same variety (or crop), planted in a single bed, all with the same approximate timings (i.e. sow date, transplant date, first harvest date, etc.).</p>
<p>If the same variety (or crop) is planted in two different beds, then this must be represented by two Planting instances.</p>
<p>It is common during the garden planning process to first design the garden at the &quot;crop&quot; level, and then later refine the plan by specifying the specific variety to be planted. To support this incremental planning process, you can create a Planting instance and specify only the Crop, not the Variety.</p>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="plantings-and-seeds">Plantings and seeds<a href="#plantings-and-seeds" class="hash-link" aria-label="Direct link to Plantings and seeds" title="Direct link to Plantings and seeds">​</a></h4>
<p>One innovative feature of GGC is that we provide an explicit representation of the seeds grown by a Planting.  Here is how it manifests in the Planting entity.</p>
<p>In each Planting document, we two optional fields called sowSeedID and harvestSeedID. The sowSeedID represents the seeds from which this Planting was grown (if known), and the harvestSeedID represents the seeds produced by this Planting (if any were produced).</p>
<p>Finally, there is a boolean field called seedsAvailable. If true, this means not only that the Planting grew seeds (and thus there is a harvestSeedID), but that this gardener is willing to share these seeds with others in the Chapter.  When seedsAvailable is true, then other Gardeners looking at the Variety associated with this planting will see that they can contact the owner of this Garden to request seeds from this Planting. They might also be able to see the Outcome data for this Planting, which provides some evidence for the future success of these seeds when grown.</p>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="plantingid-management">PlantingID management<a href="#plantingid-management" class="hash-link" aria-label="Direct link to PlantingID management" title="Direct link to PlantingID management">​</a></h4>
<p>PlantingIDs have the format <code>planting-&lt;country&gt;-&lt;postalCode&gt;-&lt;gardenNum&gt;-&lt;plantingNum&gt;-&lt;millis&gt;</code>. Please see the <a href="#ids">ID Section</a> for details regarding our approach to ID management.</p>
<p>The country and postal code fields in the ID must match those fields in the gardenID associated with this Planting.</p>
<p>Since, over a period of years, a single garden can result in over a thousand plantings, we generally use a four digit number for the plantingNum.</p>
<p>PlantingNums start at 1001 for each garden.</p>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="field-notes-2">Field notes<a href="#field-notes-2" class="hash-link" aria-label="Direct link to Field notes" title="Direct link to Field notes">​</a></h4>
<p>Validators should guarantee that startDate &lt; transplantDate &lt; firstHarvestDate &lt; endHarvestDate &lt; pullDate.</p>
<p>All Plantings must have a startDate, a pullDate, and a bedID. These values are required so that the Planting can be displayed as a horizontal bar in the Garden details view.</p>
<p>If a Gardener wants to indicate that seeds are available, they must provide the Variety for this Planting.</p>
<p>If the gardener sets usedGreenhouse to true, then they should (eventually) record a transplantDate, although this is not mandatory.</p>
<p>Note that if both a cropID and varietyID is provided, then the varietyID must &quot;match&quot; the cropID. Put another way, the associated Variety&#x27;s cropID field should match the Planting&#x27;s cropID field. (Put yet another way, this would be illegal: a Planting in which the Crop is &quot;Corn&quot; but the Variety is &quot;Big Boy (Tomato)&quot;).  The UI for defining and managing Planting entities will enforce this by only showing the Varieties associated with the currently selected Crop.</p>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="planting-entity-representation">Planting entity representation<a href="#planting-entity-representation" class="hash-link" aria-label="Direct link to Planting entity representation" title="Direct link to Planting entity representation">​</a></h4>
<div class="language-dart codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-dart codeBlock_zHgq thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_RjmQ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">factory</span><span class="token plain"> </span><span class="token class-name">Planting</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">required </span><span class="token class-name">String</span><span class="token plain"> plantingID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;planting-US-98225-102-1001-7645&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> chapterID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">     </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;chapter-US-001&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> gardenID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;garden-US-98225-102-5678&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> cropID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;crop-US-001-202-9432&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> cachedCropName</span><span class="token punctuation" style="color:#393A34">,</span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;Bean&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> bedID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">         </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;bed-US-98225-102-003-4823&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> cachedBedName</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;02&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">DateTime</span><span class="token plain"> startDate</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;2023-03-19T12:19:14.164090&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">DateTime</span><span class="token plain"> pullDate</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;2023-07-19T12:19:14.164090&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">String</span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> varietyID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">             </span><span class="token comment" style="color:#999988;font-style:italic">// null, &#x27;variety-US-001-310-7645&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">String</span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> cachedVarietyName</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">     </span><span class="token comment" style="color:#999988;font-style:italic">// null, &#x27;Big Boy&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">String</span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> outcomeID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">             </span><span class="token comment" style="color:#999988;font-style:italic">// null, &#x27;outcome-US-98225-102-1001-3472&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">DateTime</span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> transplantDate</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// null, &#x27;2023-04-19T12:19:14.164090&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">DateTime</span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> firstHarvestDate</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// null, &#x27;2023-05-19T12:19:14.164090&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">DateTime</span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> endHarvestDate</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// null, &#x27;2023-06-19T12:19:14.164090&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">String</span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> sowSeedID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">             </span><span class="token comment" style="color:#999988;font-style:italic">// null, &#x27;seed-US-98225-102-001-3563&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">String</span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> harvestSeedID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">         </span><span class="token comment" style="color:#999988;font-style:italic">// null, &#x27;seed-US-98225-102-005-2185&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token metadata function" style="color:#d73a49">@Default</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> bool usedGreenhouse</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// true, false </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token metadata function" style="color:#d73a49">@Default</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> bool isVendor</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// true, false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token metadata function" style="color:#d73a49">@Default</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> bool seedsAvailable</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// true, false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_FNw8" id="outcome">Outcome<a href="#outcome" class="hash-link" aria-label="Direct link to Outcome" title="Direct link to Outcome">​</a></h3>
<p>Outcome data is gardener-supplied information about the result of a single Planting.  We want to specify planting results in a way that:</p>
<ul>
<li>Is useful and actionable for gardeners,</li>
<li>Captures important properties of a planting,</li>
<li>Is relatively easy to provide,</li>
<li>Is interpreted in a relatively consistent manner by different gardeners,</li>
</ul>
<p>To support these requirements, we define five outcome types: germination, yield, flavor, pest and disease resistance, and appearance. Each planting can receive a &quot;grade&quot; for each of these outcome types on a five point scale.  The following table presents the definitions for each scale value for each outcome type.</p>
<table><thead><tr><th></th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th></tr></thead><tbody><tr><td><strong>Germination</strong></td><td><strong>None.</strong> No germination.</td><td><strong>Poor.</strong> ~25% germination.</td><td><strong>OK.</strong> ~50% germination.</td><td><strong>Good.</strong> ~75% germination.</td><td><strong>Excellent.</strong> &gt;90% germination..</td></tr><tr><td><strong>Yield</strong></td><td><strong>None.</strong> Died and/or no food</td><td><strong>Poor.</strong> Less food than expected</td><td><strong>OK.</strong> Expected amount of food</td><td><strong>Good.</strong> More food than expected</td><td><strong>Excellent.</strong> TWay more food than expected</td></tr><tr><td><strong>Flavor</strong></td><td><strong>Bad.</strong> Unappealing flavor</td><td><strong>Poor.</strong> Bland flavor</td><td><strong>OK.</strong> Expected flavor.</td><td><strong>Good.</strong> Enjoyable flavor</td><td><strong>Excellent.</strong> Awesome flavor.</td></tr><tr><td><strong>Pest and disease resistance</strong></td><td><strong>Very poor.</strong> &gt;90% damaged</td><td><strong>Poor.</strong> ~50% damaged</td><td><strong>OK.</strong> &lt; 25% damaged</td><td><strong>Good.</strong> Very few damaged</td><td><strong>Excellent.</strong> No damage.</td></tr><tr><td><strong>Appearance</strong></td><td><strong>Very poor.</strong> &gt;90% ugly</td><td><strong>Poor.</strong> ~60% ugly</td><td><strong>OK.</strong> ~60% not ugly</td><td><strong>Good.</strong> ~60% beautiful</td><td><strong>Excellent.</strong> &gt;90% beautiful</td></tr></tbody></table>
<p>In addition, an Outcome type can have a value of &quot;0&quot;, which means there is no data regarding that type of outcome.</p>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="outcomeid-management">OutcomeID management<a href="#outcomeid-management" class="hash-link" aria-label="Direct link to OutcomeID management" title="Direct link to OutcomeID management">​</a></h4>
<p>OutcomeIDs have the format <code>outcome-&lt;country&gt;-&lt;postalCode&gt;-&lt;gardenNum&gt;-&lt;outcomeNum&gt;-&lt;millis&gt;</code>. Please see the <a href="#ids">ID Section</a> for details regarding our approach to ID management.</p>
<p>Each Outcome entity is associated with exactly one Planting entity.  (Note that the converse is not true: a Planting entity need not be associated with an Outcome entity, since the Gardener might not choose to record any Outcome data.)</p>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="field-notes-3">Field notes<a href="#field-notes-3" class="hash-link" aria-label="Direct link to Field notes" title="Direct link to Field notes">​</a></h4>
<p>Outcomes cache the cropID and varietyID associated with their Planting. This is to allow Index and View widgets to display Outcome data without having to retrieve Plantings from the database.</p>
<p>Outcome value must be integers between 0 (indicating no data) and 5 (indicating Excellent).</p>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="outcome-entity-representation">Outcome entity representation<a href="#outcome-entity-representation" class="hash-link" aria-label="Direct link to Outcome entity representation" title="Direct link to Outcome entity representation">​</a></h4>
<div class="language-dart codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-dart codeBlock_zHgq thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_RjmQ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">factory</span><span class="token plain"> </span><span class="token class-name">Outcome</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">required </span><span class="token class-name">String</span><span class="token plain"> outcomeID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">         </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;outcome-US-98225-102-1001-5218&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> chapterID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;chapter-US-001&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> gardenID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">           </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;garden-US-98225-102-6789&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> plantingID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">         </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;planting-US-98225-102-1001-9213&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> cachedCropID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">       </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;crop-US-001-245-4376&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> cachedVarietyID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;variety-US-001-321-3214&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token metadata function" style="color:#d73a49">@Default</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> int germination</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 0-5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token metadata function" style="color:#d73a49">@Default</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> int yieldd</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">             </span><span class="token comment" style="color:#999988;font-style:italic">// 0-5 (yield is a reserved word)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token metadata function" style="color:#d73a49">@Default</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> int flavor</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">             </span><span class="token comment" style="color:#999988;font-style:italic">// 0-5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token metadata function" style="color:#d73a49">@Default</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> int resistance</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">         </span><span class="token comment" style="color:#999988;font-style:italic">// 0-5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token metadata function" style="color:#d73a49">@Default</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> int appearance</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">         </span><span class="token comment" style="color:#999988;font-style:italic">// 0-5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_FNw8" id="seed">Seed<a href="#seed" class="hash-link" aria-label="Direct link to Seed" title="Direct link to Seed">​</a></h3>
<p>The ability to save and share seeds within a Chapter is a significant core value proposition for GGC.</p>
<p>By &quot;seed&quot;, we don&#x27;t mean each individual, tiny seed. We mean the set of all seeds harvested from a planting in a garden in a particular season, or the set of seeds in a seed packet from a commercial vendor.</p>
<p>Our data model enables us to represent both seeds that are locally produced by gardeners as well as seeds that are produced by vendors.  Because a Planting can represent both the seeds that were used to grow it (in the field <code>sowSeedID</code>) as well as the seeds that it produced and could be used to grow a new Planting in a subsequent season (in the field <code>harvestSeedID</code>), we get the ability to track the &quot;provenance&quot; of a seed:</p>
<img style="border-style:solid" src="/img/develop/release-1.0/data-model/seed-provenance.png">
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="seedid-management">SeedID management<a href="#seedid-management" class="hash-link" aria-label="Direct link to SeedID management" title="Direct link to SeedID management">​</a></h4>
<p>SeedIDs have the format <code>seed-&lt;country&gt;-&lt;postalCode&gt;-&lt;gardenNum&gt;-&lt;seedNum&gt;-&lt;millis&gt;</code>. Please see the <a href="#ids">ID Section</a> for details regarding our approach to ID management.</p>
<p>SeedNums is typically taken from the plantingNum of the Planting from which the Seed was harvested.</p>
<p>The country and postal code fields are taken from the Planting that this seed was harvested from. This is to ensure that if a Chapter is reorganized, the Seed will move with the Planting it was harvested from.</p>
<div class="theme-admonition theme-admonition-warning admonition_LMjb alert alert--warning"><div class="admonitionHeading_GGQ4"><span class="admonitionIcon_ifdW"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Chapter reorganization and seeds</div><div class="admonitionContent_pGk6"><p>Note that Seeds harvested from one postal code in a Chapter can be sowed in another postal code in a Chapter. This means that if a Chapter is split up into two sub-Chapters, there is the possibility that the original Seed will need to be &quot;cloned&quot; into the two sub-Chapters.</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="field-notes-4">Field notes<a href="#field-notes-4" class="hash-link" aria-label="Direct link to Field notes" title="Direct link to Field notes">​</a></h4>
<p>Seed instances cache the gardenerID, cropID, varietyID, cropName, and seedsAvailable field values from the Planting from which they were harvested.</p>
<p>A Seed instance is always associated with a single Planting. Each Seed has a plantingID field indicating the Planting from which the Seed was harvested. In addition, that Planting has a harvestSeedID field which points to this Seed. So, there is a bi-directional mapping.</p>
<p>A Seed instance can also be associated with one or more additional Plantings as the seed from which the Planting was grown. In this case, the Seed&#x27;s ID appears in the Planting in the sowSeedID field. Those Plantings do not have to be in the same Garden (in fact, they will often be in a different garden).</p>
<p>The Seed entity provides information about the Planting from which it was harvested (but has no information about where/when it was used to sow new Plantings). This information includes the plantingID, gardenerID, cropID, cropName, varietyID, varietyName and seedsAvailable. Providing this information in the Seed entity simplifies presentation of Seed data in Index and View pages.</p>
<p>Finally, in order to safely delete a Seed instance, it must not have been used to sow any Plantings. So that we don&#x27;t have to search through all the Plantings across an entire chapter, the Seed entity provides a field called sowSeedCount. This field is initialized to zero and incremented whenever a Seed instance is referenced in the sowSeedID field of a new Planting. A Seed instance can only be deleted when the sowSeedCount is zero.</p>
<div class="theme-admonition theme-admonition-warning admonition_LMjb alert alert--warning"><div class="admonitionHeading_GGQ4"><span class="admonitionIcon_ifdW"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>SowSeedCount is never decremented</div><div class="admonitionContent_pGk6"><p>In the beta release, sowSeedCount is incremented each time a Planting specifies it as their sowSeedID. It is not reliably decremented. Because of this, in the beta release, once a Seed is created and used once as the sowSeedID, it can not be deleted. The only time you can delete a Seed is before it has ever been used as a sowSeedID in a Planting.</p></div></div>
<div class="theme-admonition theme-admonition-info admonition_LMjb alert alert--info"><div class="admonitionHeading_GGQ4"><span class="admonitionIcon_ifdW"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>plantingID field is currently optional</div><div class="admonitionContent_pGk6"><p>In a future version, plantingID will be made required.</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="seed-entity-representation">Seed entity representation<a href="#seed-entity-representation" class="hash-link" aria-label="Direct link to Seed entity representation" title="Direct link to Seed entity representation">​</a></h4>
<div class="language-dart codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-dart codeBlock_zHgq thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_RjmQ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">factory</span><span class="token plain"> </span><span class="token class-name">Seed</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">required </span><span class="token class-name">String</span><span class="token plain"> seedID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;seed-US-98225-102-001-3218&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> chapterID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;chapter-US-001&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> gardenID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">           </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;garden-US-98225-102-6789&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">String</span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> plantingID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token metadata function" style="color:#d73a49">@Default</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> int sowSeedCount</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">           </span><span class="token comment" style="color:#999988;font-style:italic">// 0, 1, 2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> cachedGardenerID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;info@heritageseeds.com&#x27; </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> cachedCropID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">       </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;crop-US-001-201-3462&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> cachedVarietyID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;variety-US-001-303-6534&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> cachedCropName</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">     </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;Tomato&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> cachedVarietyName</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;Cherokee Purple&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token metadata function" style="color:#d73a49">@Default</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> bool cachedSeedsAvailable</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// true, false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="seed-caveats">Seed caveats<a href="#seed-caveats" class="hash-link" aria-label="Direct link to Seed caveats" title="Direct link to Seed caveats">​</a></h4>
<p>In GGC, the Garden associated with a Vendor has a single Planting instance for each Variety for which they offer Seeds. This single Planting instance will have a SeedID in the harvestSeedID field, with <code>seedsAvailable</code> set to <code>true</code>.</p>
<p>In reality, a vendor may or may not have seeds in stock for a given Variety at any given time.  And, in reality, a vendor will produce their seeds from new Plantings each year. But, GGC will not attempt to keep track of real-time inventory.</p>
<h3 class="anchor anchorWithStickyNavbar_FNw8" id="observation">Observation<a href="#observation" class="hash-link" aria-label="Direct link to Observation" title="Direct link to Observation">​</a></h3>
<p>An Observation is a textual comment (and, typically, a picture) provided by a Gardener regarding a specific Planting at a specific point in time.</p>
<p>If a Gardener wishes to make a comment about a non-Planting issue (i.e. their Garden, or the Chapter, or whatever), they can use the Chat Rooms for Gardens and Chapters.</p>
<p>The essential difference is that an Observation will be &quot;carried along&quot; with a Planting---in other words, when the Gardener retrieves a View of a specific Planting, they will also see all of the Observations associated with that Planting. We hope that this will help create a useful historical record of a Planting.</p>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="observationid-management">ObservationID management<a href="#observationid-management" class="hash-link" aria-label="Direct link to ObservationID management" title="Direct link to ObservationID management">​</a></h4>
<p>ObservationIDs have the format <code>observation-&lt;country&gt;-&lt;postalCode&gt;-&lt;gardenNum&gt;-&lt;observationNum&gt;-&lt;millis&gt;</code>. Please see the <a href="#ids">ID Section</a> for details regarding our approach to ID management.</p>
<p>ObservationNums start at 4001 and are incremented chapter-wide.</p>
<p>The country and postal code fields are taken from the Planting associated with this Observation.</p>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="field-notes-5">Field notes<a href="#field-notes-5" class="hash-link" aria-label="Direct link to Field notes" title="Direct link to Field notes">​</a></h4>
<p>Observations cache several values in order to allow the Observation card to present information without having to retrieve the Planting.</p>
<p>Observations are presented in reverse chronological order by lastUpdate. When someone adds a comment, that sets the lastUpdate field.</p>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="observation-entity-representation">Observation entity representation<a href="#observation-entity-representation" class="hash-link" aria-label="Direct link to Observation entity representation" title="Direct link to Observation entity representation">​</a></h4>
<div class="language-dart codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-dart codeBlock_zHgq thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_RjmQ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">factory</span><span class="token plain"> </span><span class="token class-name">Observation</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">required </span><span class="token class-name">String</span><span class="token plain"> observationID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">     </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;observation-US-98225-102-4001-5634&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> chapterID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;chapter-US-001&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> gardenID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">           </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;garden-US-98225-102-6789&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> gardenerID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">         </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;johnson@hawaii.edu&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> plantingID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">         </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;planting-US-98225-102-1002-9432&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">DateTime</span><span class="token plain"> observationDate</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;2023-03-19T12:19:14.164090&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">DateTime</span><span class="token plain"> lastUpdate</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">       </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;2023-03-19T12:19:14.164090&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">List</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> tagIDs</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">       </span><span class="token comment" style="color:#999988;font-style:italic">// [&#x27;tag-001-501&#x27;]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">List</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">ObservationComment</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> comments</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// [&#x27;observation-US-98225-102-4001-001-9876&#x27;]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> description</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;First harvest of the season&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">String</span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> pictureURL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">                 </span><span class="token comment" style="color:#999988;font-style:italic">// null, &#x27;https://firebasestorage.googleapis.com/v0/...&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token metadata function" style="color:#d73a49">@Default</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> bool isPrivate</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">     </span><span class="token comment" style="color:#999988;font-style:italic">// true, false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> cachedCropID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">       </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;crop-US-001-243-3425&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> cachedVarietyID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;variety-US-001-323-9654&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> cachedBedName</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;03&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> cachedCropName</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">     </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;Tomato&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> cachedVarietyName</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;Cherokee Purple&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> cachedGardenName</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;Kale is for Kids&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">DateTime</span><span class="token plain"> cachedStartDate</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;2023-03-19T12:19:14.164090&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="observation-comments">Observation Comments<a href="#observation-comments" class="hash-link" aria-label="Direct link to Observation Comments" title="Direct link to Observation Comments">​</a></h4>
<p>As shown above, each Observation entity includes an embedded (potentially empty) list of ObservationComments, which have this structure:</p>
<div class="language-dart codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-dart codeBlock_zHgq thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_RjmQ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">factory</span><span class="token plain"> </span><span class="token class-name">ObservationComment</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">required </span><span class="token class-name">String</span><span class="token plain"> observationCommentID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;observationcomment-US-98225-102-4001-001-4532&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> gardenerID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">              </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;johnson@hawaii.edu&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> description</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">             </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;Is that an aphid on the left leaf?&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">DateTime</span><span class="token plain"> lastUpdate</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;2023-03-19T12:19:14.164090&#x27;          </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The lastUpdate field indicates when the comment was made or updated.</p>
<h3 class="anchor anchorWithStickyNavbar_FNw8" id="tag">Tag<a href="#tag" class="hash-link" aria-label="Direct link to Tag" title="Direct link to Tag">​</a></h3>
<p>The Tag entity provides &quot;meta-data&quot; that a gardener can use to provide information about the nature of an Observation.  Tags serve two basic purposes:</p>
<ol>
<li>
<p>Filtering. A user can specify a set of Tags and filter the Observations by those that satisfy either (both?) of them.</p>
</li>
<li>
<p>Badge achievement. Many Badges are earned, at least in part, by posting (public) Observations with specific Tags.</p>
</li>
</ol>
<p>Tags, like Badges, Families, and Chapters, are &quot;global&quot; entities that are not Chapter-specific. Therefore, they can only be managed by system admins.</p>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="tagid-management">TagID management<a href="#tagid-management" class="hash-link" aria-label="Direct link to TagID management" title="Direct link to TagID management">​</a></h4>
<p>TagIDs have the format <code>tag-&lt;tagNum&gt;</code>. Please see the <a href="#ids">ID Section</a> for details regarding our approach to ID management.</p>
<p>TagIDs start at 001.</p>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="tag-entity-representation">Tag entity representation<a href="#tag-entity-representation" class="hash-link" aria-label="Direct link to Tag entity representation" title="Direct link to Tag entity representation">​</a></h4>
<div class="language-dart codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-dart codeBlock_zHgq thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_RjmQ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">factory</span><span class="token plain"> </span><span class="token class-name">Tag</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">required </span><span class="token class-name">String</span><span class="token plain"> tagID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;tag-001&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;#Biodiversity&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> description</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">     </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;Use of practices to increase biodiversity...&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_FNw8" id="task">Task<a href="#task" class="hash-link" aria-label="Direct link to Task" title="Direct link to Task">​</a></h3>
<p>A Task specifies an activity to perform for a specific Planting in a specific Garden. There are two  types of tasks:</p>
<ol>
<li>
<p>An <em>automatically created</em> Task that is generated from the dates associated with a Planting, such as <code>transplant date</code> or <code>first harvest date</code>. Whenever the Gardener adjusts the dates associated with a Planting, the associated Task is updated. Conversely, if a Gardener adjusts the date associated with a Task, then the associated Planting date is updated as well.</p>
</li>
<li>
<p>A <em>manually created</em> Task created by a gardener, such as <code>Weed cucumbers</code> or <code>Add top dressing to radishes</code>.</p>
</li>
</ol>
<p>Tasks are ephemeral.  When a Gardener indicates that a task has been completed, it is deleted from the system. For automatically created Tasks that are associated with a Planting date, the system prompts the gardener to verify the completion date prior to deleting the Task.  This prompt is used to update the date in the Planting instance.  This is an important form of &quot;quality assurance&quot; for Planting dates, since the Gardener typically specifies these dates early in the season during planning. The ability of Tasks to help ensure that Planting dates are accurate can make Chapter data more useful.</p>
<div class="theme-admonition theme-admonition-info admonition_LMjb alert alert--info"><div class="admonitionHeading_GGQ4"><span class="admonitionIcon_ifdW"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Non-ephemeral (manually generated) tasks would be cool</div><div class="admonitionContent_pGk6"><p>Currently, all tasks are ephemeral. It would be potentially useful for a Gardener to be able to mark a manually generated Task as &quot;non-ephemeral&quot;. This would mean that if the Gardener plans a future Garden, that task could be retrieved and associated with a new Planting.</p><p>We will leave this as a feature for a future release.</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="taskid-management">TaskID management<a href="#taskid-management" class="hash-link" aria-label="Direct link to TaskID management" title="Direct link to TaskID management">​</a></h4>
<p>TaskIDs have the format <code>task-&lt;country&gt;-&lt;postalCode&gt;-&lt;gardenNum&gt;-&lt;plantingNum&gt;-&lt;taskNum&gt;-&lt;millis&gt;</code>. Please see the <a href="#ids">ID Section</a> for details regarding our approach to ID management.</p>
<p>TaskIDs start at 001.</p>
<p>The country, postal code, gardenNum, and plantingNum fields are taken from the Planting associated with this Task.</p>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="task-types">Task Types<a href="#task-types" class="hash-link" aria-label="Direct link to Task Types" title="Direct link to Task Types">​</a></h4>
<p>Each Task has a TaskType:</p>
<div class="language-dart codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-dart codeBlock_zHgq thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_RjmQ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">enum</span><span class="token plain"> </span><span class="token class-name">TaskType</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> start</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> transplant</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> firstHarvest</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> endHarvest</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> pull</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> other </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The first five correspond to the Planting dates. &quot;Other&quot; is used for manually created Tasks.</p>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="task-titles-and-descriptions">Task titles and descriptions<a href="#task-titles-and-descriptions" class="hash-link" aria-label="Direct link to Task titles and descriptions" title="Direct link to Task titles and descriptions">​</a></h4>
<p>For automatically generated tasks, the title is automatically generated using the task type plus the variety, for example &quot;Start Tomato (Big Boy)&quot;.  Automatically generated tasks are not created with a description.</p>
<p>For manually generated tasks, the Gardener must specify the title and can also supply a description if desired.</p>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="task-entity-representation">Task entity representation<a href="#task-entity-representation" class="hash-link" aria-label="Direct link to Task entity representation" title="Direct link to Task entity representation">​</a></h4>
<div class="language-dart codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-dart codeBlock_zHgq thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_RjmQ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">factory</span><span class="token plain"> </span><span class="token class-name">Task</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">required </span><span class="token class-name">String</span><span class="token plain"> taskID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;task-US-98225-101-1003-001-7634&#x27; </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> chapterID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;chapter-US-001&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> gardenID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">         </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;garden-US-98225-101-6789&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> taskType</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">         </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;start&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> title</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;Start Tomato (Big Boy)&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">String</span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> gardenerID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">              </span><span class="token comment" style="color:#999988;font-style:italic">// The owner of the garden, i.e. &#x27;johnson@hawaii.edu&#x27;.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">String</span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> description</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">              </span><span class="token comment" style="color:#999988;font-style:italic">// null, &#x27;Clean up ground cherries.&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> cropID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">           </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;crop-US-001-203-5412&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> varietyID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;variety-US-001-101-304-6534&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> bedID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;bed-US-98225-101-003-8956&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> plantingID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">       </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;planting-US-98225-101-1003-3214&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">DateTime</span><span class="token plain"> dueDate</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;2023-03-19T12:19:14.164090&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> cachedBedName</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;02&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> cachedCropName</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;Tomato&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> cachedVarietyName</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;Kale is for Kids&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_FNw8" id="badge">Badge<a href="#badge" class="hash-link" aria-label="Direct link to Badge" title="Direct link to Badge">​</a></h3>
<p>GGC provides a game mechanic called &quot;Badges&quot;. These are designations for Gardens, Gardeners, and (in future) Chapters that recognize the use of best practices for gardening (such as composting), or significant experience with a specific crop, or other behaviors that we wish to encourage.</p>
<p>The Badge game mechanic is implemented through two entities: &quot;Badge&quot; and &quot;BadgeInstance&quot;. The Badge entity is a global entity (i.e. independent of any Chapter and defined by the system), and defines the game mechanic.  The BadgeInstance entity represents the achievement of a Badge by a Garden, Gardener, or (in future) Chapter.</p>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="badgeid-and-badgeinstanceid-management">BadgeID and BadgeInstanceID management<a href="#badgeid-and-badgeinstanceid-management" class="hash-link" aria-label="Direct link to BadgeID and BadgeInstanceID management" title="Direct link to BadgeID and BadgeInstanceID management">​</a></h4>
<p>BadgeIDs have the format <code>badge-&lt;badgeNum&gt;</code>. Please see the <a href="#ids">ID Section</a> for details regarding our approach to ID management.</p>
<p>BadgeIDs start at 001.</p>
<p>BadgeInstanceIDs have the format <code>badgeinstance-&lt;country&gt;-&lt;chapterCode&gt;-&lt;badgeinstanceNum&gt;-&lt;millis&gt;</code>.</p>
<p>BadgeInstanceNums start at 001.</p>
<p>The country and chapterCode fields are taken from the Chapter associated with this Garden or Gardener (and in the future, Chapter).</p>
<p>There is a BadgeType enum represented as follows:</p>
<div class="language-dart codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-dart codeBlock_zHgq thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_RjmQ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">enum</span><span class="token plain"> </span><span class="token class-name">BadgeType</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> garden</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> gardener</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> chapter </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_FNw8" id="badge-entity-representation">Badge entity representation<a href="#badge-entity-representation" class="hash-link" aria-label="Direct link to Badge entity representation" title="Direct link to Badge entity representation">​</a></h4>
<p>Badges:</p>
<div class="language-dart codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-dart codeBlock_zHgq thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_RjmQ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">factory</span><span class="token plain"> </span><span class="token class-name">Badge</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">required </span><span class="token class-name">String</span><span class="token plain"> badgeID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">       </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;badge-001&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> type</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">           </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;garden&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">           </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;Climate Victory&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> criteria</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">       </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;A climate victory garden has been...&#x27; </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> level1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">         </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;The garden is present...&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> level2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">         </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;The garden is present..., and...&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> level3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">         </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;The garden is present..., and..., and...&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">List</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> tagIDs</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">// [&#x27;tag-024&#x27;, &#x27;tag-037&#x27;]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Badge Instances:</p>
<div class="language-dart codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-dart codeBlock_zHgq thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_RjmQ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">factory</span><span class="token plain"> </span><span class="token class-name">BadgeInstance</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">required </span><span class="token class-name">String</span><span class="token plain"> badgeInstanceID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;badgeinstance-US-001-001-5634&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> chapterID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">         </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;chapter-US-001&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> badgeID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">           </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;badge-001&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required int level</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">                </span><span class="token comment" style="color:#999988;font-style:italic">// 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">                </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;johnson@hawaii.edu&#x27;, &#x27;garden-US-98225-101-6789&#x27;, &#x27;chapter-US-001&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> type</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">              </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;gardener&#x27;, &#x27;garden&#x27;, &#x27;chapter&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required </span><span class="token class-name">String</span><span class="token plain"> cachedName</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;Climate Victory&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">String</span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">                      </span><span class="token comment" style="color:#999988;font-style:italic">// null, &#x27;supplementary data&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">String</span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> data2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">                     </span><span class="token comment" style="color:#999988;font-style:italic">// null, &#x27;supplementary data2&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">String</span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> data3</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">                     </span><span class="token comment" style="color:#999988;font-style:italic">// null, &#x27;supplementary data3&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_FNw8" id="collections-and-business-logic">Collections and business logic<a href="#collections-and-business-logic" class="hash-link" aria-label="Direct link to Collections and business logic" title="Direct link to Collections and business logic">​</a></h2>
<p>As noted above, each entity is represented as a Dart class, and made persistent as a document in Firebase.</p>
<p>Groups of entity instances of the same type are also represented as a Dart class, and made persistent as a collection in Firebase.   So, for example, there is a Dart class called &quot;Chapter&quot; (to represent individual instances of that entity) and a Dart class called &quot;ChapterCollection&quot; (to manage a set of Chapter instances). On the Firebase side, there is a collection called Chapters, and each document in that collection has the same structure as the corresponding Dart class. We use <a href="https://pub.dev/packages/freezed" target="_blank" rel="noopener noreferrer">freezed</a> to support the translation between the Dart class instance for an entity and its persistent representation as a Firebase document in JSON format.</p>
<p>The client-side collection classes (ChapterCollection, GardenCollection, etc) are intended to encapsulate the &quot;business logic&quot; for the application.</p>
<h2 class="anchor anchorWithStickyNavbar_FNw8" id="privacy">Privacy<a href="#privacy" class="hash-link" aria-label="Direct link to Privacy" title="Direct link to Privacy">​</a></h2>
<p>On the one hand, we want to preserve certain types of privacy:</p>
<ul>
<li>Users pick a unique &quot;username&quot; which is used in postings so that they do not have to reveal their true name.</li>
<li>The application does not reveal (and does not know) the precise location of gardens, only their country and postal code.</li>
<li>Users can tag an Observation as &quot;private&quot;, and in that case it will not be visible to users outside of the garden&#x27;s owner and editors.  This allows users to take photos regarding the garden for their personal data collection without feeling inhibited about it becoming &quot;public&quot;. For example, the photo might reveal faces or locations.</li>
</ul>
<p>On the other hand, we want to facilitate the creation of a community of practice. For this reason, all garden data (plantings, etc) are available, in at least a read-only format, to all members of a chapter.</p>
<p>A significant goal for the beta release is to test the hypothesis that it is not problematic for users to share these kinds garden details with others in the chapter.</p>
<p>A broader question, that we will not explore in the beta release, is what kinds of data could be made available across Chapters.</p>
<h2 class="anchor anchorWithStickyNavbar_FNw8" id="ids">IDs<a href="#ids" class="hash-link" aria-label="Direct link to IDs" title="Direct link to IDs">​</a></h2>
<p>In NoSQL databases, it is common for each document to be automatically provided upon creation with a unique string called a &quot;docID&quot; which looks something like this: <code>tghHU4CVfxHGB</code>. The docID is generated by the server and is guaranteed to be unique. It serves as the primary key for entities in that collection.</p>
<p>In GGC, we use a different approach. There is no &quot;docID&quot; field. Instead, the Crop collection has a unique ID called &quot;cropID&quot;, the Chapter collection has a unique ID called &quot;chapterID&quot;, and so forth. We tell the NoSQL database (in our case, Firebase) that these various ID fields should be used as the primary key (i.e. the docID) for each of the collections.</p>
<p>Importantly, non-global entities are generally created by clients, and in GGC, clients (not the server) are responsible for generating the primary keys for non-global entities.  (The global entities, such as Chapter, Family, Badge, etc. are constructed by the system, not clients.)</p>
<p>We have clients generate the primary keys for non-global entities for the following reasons:</p>
<ul>
<li>Rather than a server-generated random string, our client-generated primary keys are &quot;human-readable&quot;. You can look at an ID string and know what kind of entity it is associated with (all GGC IDs have a prefix like &quot;chapter-&quot;, &quot;crop-&quot;, etc). Since many entities have fields containing the IDs of other entities, human-readable IDs help in development and system understanding.</li>
<li>In many cases, an update to the database can involve the creation of a new entity (or entities) as well as updates to other entities to include the primary key of the newly created entity (or entities). If primary keys are generated by the server, such updates would become a complex, multi-step process. Since primary keys are generated by the client, these updates are much more simple to accomplish.</li>
</ul>
<p>However, client-generated primary keys have one significant drawback:</p>
<ul>
<li>It becomes technically possible for two clients to generate a &quot;primary key collision&quot;, i.e. an attempt by different clients to create two entities with the same primary key value at the same time.</li>
</ul>
<p>To deal with this drawback, we have carefully designed the primary keys in GGC to make it extremely unlikely for primary key collisions to occur.</p>
<p>First, primary keys are constructed to include one or more of the chapterID, the country code, the postal code, or the gardenID. This means, for example, that rather than it being possible for a primary key collision to occur by any two GGC users anywhere in the world, it is becomes only possible for it to occur between the owner and editors of a single garden.</p>
<p>Second, client-generated primary keys are constructed with a &quot;millis&quot; field. This is a four digit number representing the millisecond value at the time the client created the primary key.</p>
<p>We believe that these two properties of primary keys mean that collisions will not occur in practice, even when clients are operating in disconnected mode.</p>
<p>Finally, let&#x27;s say that this exceedingly unlikely event actually occurs.  In that case, because we have told Firebase that the plantingID (for example) is the primary key, Firebase will reject the second plantingID creation. In this case, the application can simply report the error and instruct the user to try again in a few seconds. By this time, the local cache should be updated and the request to create the new entity should succeed.</p>
<p>Note that <a href="https://firebase.google.com/docs/firestore/best-practices#hotspots" target="_blank" rel="noopener noreferrer">Firebase recommends against creating documentIDs with lexicographically close ranges</a>. We expect that the inclusion of the millis field mitigates this potential performance issue.</p>
<h2 class="anchor anchorWithStickyNavbar_FNw8" id="normalization-and-caching">Normalization and caching<a href="#normalization-and-caching" class="hash-link" aria-label="Direct link to Normalization and caching" title="Direct link to Normalization and caching">​</a></h2>
<p>A best practice for relational database design is &quot;<a href="https://en.wikipedia.org/wiki/Database_normalization" target="_blank" rel="noopener noreferrer">normalization</a>&quot;, which means that a value should only occur in one place at a time.  Normalization has a number of virtues, such as making updates and deletions more efficient and less error prone.  But normalization also has a cost: queries can become very complicated, involving complex &quot;joins&quot; from a variety of data sources.</p>
<p>The GGC app has the following design considerations that impact on the issue of normalization:</p>
<ul>
<li>Updates and deletions are (relatively) rare.  GGC is mostly an &quot;additive&quot; database. While deletions and updates can occur, it&#x27;s OK if they are &quot;expensive&quot;.</li>
<li>Reads are common, and to make these reads fast, GGC implements client-side caches (using Riverpod) for many of the entities.</li>
<li>Gardeners do not access to data outside their Chapter, so client-side caches are not impacted if the number of Chapters in GGC becomes large.</li>
</ul>
<p>To simplify retrieval and caching of the appropriate chapter or garden-level &quot;slice&quot; of the database by a client, almost all GGC entities include a chapterID and gardenID field.</p>
<p>We also &quot;denormalize&quot; by providing &quot;redundant&quot; fields in certain entities. For example, in some cases a document will include a cropName field even though it already has a cropID field.  We do this avoid having to download large numbers of documents  (i.e. Plantings for all Gardens in the Chapter) in order to perform a calculation. These redundant field names have the prefix &quot;cached&quot; in order to make this denormalization explicit in the data model.</p>
<h2 class="anchor anchorWithStickyNavbar_FNw8" id="root-collections-vs-subcollections">Root collections vs subcollections<a href="#root-collections-vs-subcollections" class="hash-link" aria-label="Direct link to Root collections vs subcollections" title="Direct link to Root collections vs subcollections">​</a></h2>
<p>In Firebase, you can organize the data into root collections or subcollections, as explained in <a href="https://firebase.google.com/docs/firestore/manage-data/structure-data" target="_blank" rel="noopener noreferrer">Choose a data structure</a>.</p>
<p>Since GGC involves many many-to-many relationships, we choose to organize all of our data as root collections.</p>
<p>In Firebase, there are no performance differences between root collections and subcollections, so we do not gain or lose anything by making this choice.</p>
<h2 class="anchor anchorWithStickyNavbar_FNw8" id="chat-rooms">Chat rooms<a href="#chat-rooms" class="hash-link" aria-label="Direct link to Chat rooms" title="Direct link to Chat rooms">​</a></h2>
<p>We use the <a href="https://pub.dev/packages/flutter_chat_ui" target="_blank" rel="noopener noreferrer">Flutter Chat UI</a> package to implement Chat rooms and users. This results in the addition of some collections to Firebase. We do not document this here.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/develop/release-1.0/beta-test-feedback"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Release 1.0 (Beta) Feedback</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/develop/release-1.0/design-components/badges"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Badges</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_IS5x thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#entities" class="table-of-contents__link toc-highlight">Entities</a><ul><li><a href="#chapter" class="table-of-contents__link toc-highlight">Chapter</a></li><li><a href="#user" class="table-of-contents__link toc-highlight">User</a></li><li><a href="#gardener" class="table-of-contents__link toc-highlight">Gardener</a></li><li><a href="#garden" class="table-of-contents__link toc-highlight">Garden</a></li><li><a href="#editor" class="table-of-contents__link toc-highlight">Editor</a></li><li><a href="#bed" class="table-of-contents__link toc-highlight">Bed</a></li><li><a href="#family" class="table-of-contents__link toc-highlight">Family</a></li><li><a href="#crop" class="table-of-contents__link toc-highlight">Crop</a></li><li><a href="#variety" class="table-of-contents__link toc-highlight">Variety</a></li><li><a href="#planting" class="table-of-contents__link toc-highlight">Planting</a></li><li><a href="#outcome" class="table-of-contents__link toc-highlight">Outcome</a></li><li><a href="#seed" class="table-of-contents__link toc-highlight">Seed</a></li><li><a href="#observation" class="table-of-contents__link toc-highlight">Observation</a></li><li><a href="#tag" class="table-of-contents__link toc-highlight">Tag</a></li><li><a href="#task" class="table-of-contents__link toc-highlight">Task</a></li><li><a href="#badge" class="table-of-contents__link toc-highlight">Badge</a></li></ul></li><li><a href="#collections-and-business-logic" class="table-of-contents__link toc-highlight">Collections and business logic</a></li><li><a href="#privacy" class="table-of-contents__link toc-highlight">Privacy</a></li><li><a href="#ids" class="table-of-contents__link toc-highlight">IDs</a></li><li><a href="#normalization-and-caching" class="table-of-contents__link toc-highlight">Normalization and caching</a></li><li><a href="#root-collections-vs-subcollections" class="table-of-contents__link toc-highlight">Root collections vs subcollections</a></li><li><a href="#chat-rooms" class="table-of-contents__link toc-highlight">Chat rooms</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__links text--center"><div class="footer__links"><a href="https://www.facebook.com/geogardenclub" target="_blank" rel="noopener noreferrer" class="footer__link-item">Facebook<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_T11m"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><span class="footer__link-separator">·</span><a href="https://www.instagram.com/geogardenclub/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Instagram<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_T11m"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><span class="footer__link-separator">·</span><a href="https://geogardenclub.us10.list-manage.com/subscribe?u=2c9db5ab59b4602f6c71e2091&amp;id=c75bee0e1e" target="_blank" rel="noopener noreferrer" class="footer__link-item">Join the GGC mailing list<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_T11m"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><span class="footer__link-separator">·</span><a href="https://us10.campaign-archive.com/home/?u=2c9db5ab59b4602f6c71e2091&amp;id=c75bee0e1e" target="_blank" rel="noopener noreferrer" class="footer__link-item">News Archive<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_T11m"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Geo Garden Club, LLC</div></div></div></footer></div>
</body>
</html>