"use strict";(self.webpackChunkgeogardenclub_github_io=self.webpackChunkgeogardenclub_github_io||[]).push([[6041],{5378:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>s,default:()=>c,frontMatter:()=>r,metadata:()=>o,toc:()=>l});var a=n(5893),i=n(1151);const r={hide_table_of_contents:!1,toc_max_heading_level:2},s="Data Model",o={id:"develop/data-model",title:"Data Model",description:"This page explains the data model (i.e. the set of entities and their relationships) for GGC, along with a rationale for the design decisions that we've made along the way.",source:"@site/docs/develop/data-model.md",sourceDirName:"develop",slug:"/develop/data-model",permalink:"/docs/develop/data-model",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{hide_table_of_contents:!1,toc_max_heading_level:2},sidebar:"developSidebar",previous:{title:"Architecture",permalink:"/docs/develop/architecture"},next:{title:"Database management",permalink:"/docs/develop/database-management"}},d={},l=[{value:"Overview",id:"overview",level:2},{value:"Entity Hierarchy",id:"entity-hierarchy",level:3},{value:"Entity dependencies",id:"entity-dependencies",level:3},{value:"Chapter",id:"chapter",level:2},{value:"ChapterID management",id:"chapterid-management",level:3},{value:"User registration and chapter assignment",id:"user-registration-and-chapter-assignment",level:3},{value:"ChapterID as Firebase index",id:"chapterid-as-firebase-index",level:3},{value:"Chapter entity representation",id:"chapter-entity-representation",level:3},{value:"User",id:"user",level:2},{value:"User entity representation",id:"user-entity-representation",level:3},{value:"UserID management",id:"userid-management",level:3},{value:"User onboarding",id:"user-onboarding",level:3},{value:"Gardener",id:"gardener",level:2},{value:"Gardener entity representation",id:"gardener-entity-representation",level:3},{value:"Cached values",id:"cached-values",level:3},{value:"Badge attestations",id:"badge-attestations",level:3},{value:"GardenerID management",id:"gardenerid-management",level:3},{value:"Garden",id:"garden",level:2},{value:"Garden entity representation",id:"garden-entity-representation",level:3},{value:"GardenID management",id:"gardenid-management",level:3},{value:"Cached values",id:"cached-values-1",level:3},{value:"Badge attestations",id:"badge-attestations-1",level:3},{value:"Editor",id:"editor",level:2},{value:"Editor entity representation",id:"editor-entity-representation",level:3},{value:"EditorID management",id:"editorid-management",level:3},{value:"Bed",id:"bed",level:2},{value:"Bed entity representation",id:"bed-entity-representation",level:3},{value:"BedID management",id:"bedid-management",level:3},{value:"Family",id:"family",level:2},{value:"Family entity representation",id:"family-entity-representation",level:3},{value:"FamilyID management",id:"familyid-management",level:3},{value:"Crop",id:"crop",level:2},{value:"Crop entity representation",id:"crop-entity-representation",level:3},{value:"CropID management",id:"cropid-management",level:3},{value:"Variety",id:"variety",level:2},{value:"Variety entity representation",id:"variety-entity-representation",level:3},{value:"VarietyID management",id:"varietyid-management",level:3},{value:"Planting",id:"planting",level:2},{value:"Planting entity representation",id:"planting-entity-representation",level:3},{value:"PlantingID management",id:"plantingid-management",level:3},{value:"Outcome",id:"outcome",level:2},{value:"Outcome entity representation",id:"outcome-entity-representation",level:3},{value:"OutcomeID management",id:"outcomeid-management",level:3},{value:"Observation",id:"observation",level:2},{value:"Observation entity representation",id:"observation-entity-representation",level:3},{value:"ObservationID management",id:"observationid-management",level:3},{value:"Observation Comments",id:"observation-comments",level:3},{value:"Tag",id:"tag",level:2},{value:"Tag entity representation",id:"tag-entity-representation",level:3},{value:"TagID management",id:"tagid-management",level:3},{value:"Task",id:"task",level:2},{value:"Task entity representation",id:"task-entity-representation",level:3},{value:"TaskID management",id:"taskid-management",level:3},{value:"Task Types",id:"task-types",level:3},{value:"Task titles and descriptions",id:"task-titles-and-descriptions",level:3},{value:"Badge",id:"badge",level:2},{value:"Badge entity representation",id:"badge-entity-representation",level:3},{value:"BadgeID and BadgeInstanceID management",id:"badgeid-and-badgeinstanceid-management",level:3},{value:"ChatRooms/ChatUsers",id:"chatroomschatusers",level:2}];function h(e){const t={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.header,{children:(0,a.jsx)(t.h1,{id:"data-model",children:"Data Model"})}),"\n",(0,a.jsx)(t.p,{children:"This page explains the data model (i.e. the set of entities and their relationships) for GGC, along with a rationale for the design decisions that we've made along the way."}),"\n",(0,a.jsx)(t.h2,{id:"overview",children:"Overview"}),"\n",(0,a.jsx)(t.p,{children:'In GGC, "entity" refers to the fundamental forms of persistent data objects. Examples of entities are: "Chapter", "Garden", "Gardener", "Observation", etc.  There are about 16 major entities in the system (see the right side menu for a listing).'}),"\n",(0,a.jsx)(t.p,{children:"Entity instances are persisted as documents in a Firebase collection. In general, each entity has a corresponding collection: for example, all the Chapter entity documents are stored in a Firebase collection called Chapters, all the Gardener entity documents are stored in a Firebase collection called Gardeners, and so forth."}),"\n",(0,a.jsxs)(t.p,{children:['The GGC app implements a pair of Dart "domain" classes that mirror these Firebase collections. First, for an entity named "Foo", there would be a Dart class called "Foo" that represents a single instance of a Foo. Second, there would also be a Dart class called "FooCollection", which provides access to a set of Foo instances.  Note than an instance of the FooCollection is not guaranteed to contain all the Foo instances in the Firebase Foo collection; but it should always contain all the Foo instances ',(0,a.jsx)(t.em,{children:"needed"})," by the app at that particular point in time."]}),"\n",(0,a.jsxs)(t.p,{children:["We use the ",(0,a.jsx)(t.a,{href:"https://pub.dev/packages/freezed",children:"Freezed"})," package to facilitate the definition of entities."]}),"\n",(0,a.jsx)(t.h3,{id:"entity-hierarchy",children:"Entity Hierarchy"}),"\n",(0,a.jsx)(t.p,{children:"The following diagram provides one way to understand the organization of GGC entities: as a three level hierarchy:"}),"\n",(0,a.jsx)("img",{style:{borderStyle:"solid"},src:"/img/develop/data-entity-overview.png"}),"\n",(0,a.jsx)(t.p,{children:"This perspective partitions the entities into three categories:"}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsx)(t.li,{children:'"Global-level" entities.  These entities are globally accessible to all Chapters.'}),"\n",(0,a.jsx)(t.li,{children:'"Chapter-level" entities. These are "top-level" entities for any given chapter. These entities all include a chapterID field. Each user is always associated with a single Chapter, and thus can only "see" the chapter-level entities with a matching chapterID. They are normally downloaded and cached in the client application upon login.'}),"\n",(0,a.jsx)(t.li,{children:'"Garden-level" entities. These entities are all specific to a single Garden, and include both a chapterID and a gardenID. Garden-level entities are only visible within their Chapter. In addition, Garden-level entities might only be downloaded on-demand.'}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:'This diagram can also be used to understand the relative numbers of entities that a given client must manipulate. Each of the "Global-level" entity will have dozens to hundreds of instances, and so it is practical for the client application to cache all of them locally without a large performance impact.'}),"\n",(0,a.jsx)(t.p,{children:'Since each User is associated with a single Chapter, the number of "Chapter-level" entity instances visible to a User is not expected to exceed several hundred to a thousand. This means it is also practical for the client application to cache all "visible" Chapter-level entities locally.'}),"\n",(0,a.jsx)(t.p,{children:'However, we expect each User to be associated with one to a dozen Gardens. Each Garden might have hundreds to thousands of Plantings. This means it is practical for the client application to cache the "Garden-level" entities that they are associated with.'}),"\n",(0,a.jsx)(t.p,{children:"However, since each Garden can be associated with hundreds to thousands of Plantings, we do not think it is practical for the User to cache all the Plantings associated with all the Gardens in the Chapter. Our design is intended to avoid this, so that Plantings are only downloaded on an as-needed basis."}),"\n",(0,a.jsx)(t.p,{children:'Thus the goal of this design is to create "chapter-level" and "garden-level" namespaces, such that GeoGardenClub can scale to hundreds of Chapters, where each Chapter contains hundreds of gardens, and where each Garden contains hundreds of Plantings (and other Garden-specific entities), all while providing a fast, intuitive, and responsive application for each user. Our design is intended to allow the GGC database to grow to millions of documents while enabling individual clients to require access to only thousands of documents.'}),"\n",(0,a.jsxs)(t.admonition,{title:"What about huge chapters?",type:"warning",children:[(0,a.jsx)(t.p,{children:"This design does appear to have a potential problem: what if a Chapter becomes wildly popular and grows to many thousands of members? It is possible that the performance of the client application can degrade if the number of members in a single Chapter becomes too large."}),(0,a.jsx)(t.p,{children:'To address this potential problem, the data model is also designed to facilitate partitioning of large Chapters into multiple smaller Chapters. For example, the initial definition of a Chapter may comprise 8 postal (zip) codes, corresponding to all the postal codes in that country. But if that Chapter becomes too large, we could split it into two Chapters, each defined with 4 postal codes (or one with 3 postal codes and one with 5 postal codes, depending upon the concentration of members in each postal code).  Our data model does not currently allow Chapter definition "below" the level of a postal code, so the smallest possible Chapter in GeoGardenClub would be one defined by a single postal code.'})]}),"\n",(0,a.jsx)(t.h3,{id:"entity-dependencies",children:"Entity dependencies"}),"\n",(0,a.jsx)(t.p,{children:"The following diagram presents an alternative perspective on the entities. In this case, there is a line between two entities when there is a relationship between them; in other words, one of the entities refers to the other with a foreign key (i.e. ID) field."}),"\n",(0,a.jsx)("img",{style:{borderStyle:"solid"},src:"/img/develop/data-model-dependencies.png"}),"\n",(0,a.jsx)(t.p,{children:"The primary goal of this diagram is to make it clear that there is a fairly rich set of dependencies among the entities in this data model."}),"\n",(0,a.jsx)(t.p,{children:'This is a positive thing, because it means that there are many different and interesting ways to "slice and dice" the data.'}),"\n",(0,a.jsxs)(t.p,{children:["It also illustrates why we have chosen to implement the data model as a set of top-level collections with no subcollections. The many different relationships argue against the use of subcollections. The Firestore documentation indicates that there is no performance penalty to using all top-level collections. More details are available in the Firebase documentation called ",(0,a.jsx)(t.a,{href:"https://firebase.google.com/docs/firestore/manage-data/structure-data",children:"Choose a data structure"}),"."]}),"\n",(0,a.jsx)(t.p,{children:"Let's now turn to a more detailed description of the entities in the data model."}),"\n",(0,a.jsx)(t.h2,{id:"chapter",children:"Chapter"}),"\n",(0,a.jsx)(t.p,{children:"The Chapter entity defines a geographic region based on a country (represented as a two character (alpha-2) country code), and a set of one or more postal (zip) codes.  GGC ensures that Chapter instances partition the world: every pair of (country code, postal code) is mapped to exactly one Chapter."}),"\n",(0,a.jsx)(t.p,{children:"Currently, the set of Chapters in GGC are manually maintained. For 2025, we plan to support only two Chapters: Whatcom County, WA and Skagit County, WA. These will be the only choices available when a user signs up with GGC in 2025."}),"\n",(0,a.jsxs)(t.admonition,{title:"What about 2026 and beyond?",type:"warning",children:[(0,a.jsx)(t.h3,{id:"chapterid-management",children:"ChapterID management"}),(0,a.jsx)(t.p,{children:"A Firebase collection called ChapterZipMap will provide a default mapping of US postal (i.e. zip) codes to chapterIDs.  This mapping initially defines a one-to-one correspondence between US counties and GGC Chapters."}),(0,a.jsx)(t.p,{children:"Outside of the US, each (country code, postal code) pair will be its own Chapter. This is not optimal but it provides a way to make GGC immediately available to users outside the US without constructing a world-wide ChapterPostalCodeMap. We can add this later without any change to the data model."}),(0,a.jsxs)(t.p,{children:["Unlike most other entity IDs, the complete set of chapterIDs is defined in advance in GGC. In other words, we can compute all of the chapterIDs on earth, and they do not depend upon the number of users or their behavior. In contrast, there is no ",(0,a.jsx)(t.em,{children:"a priori"})," limit to the number of (say) Planting IDs."]}),(0,a.jsxs)(t.p,{children:["While chapterIDs are finite, they are not necessarily ",(0,a.jsx)(t.em,{children:"fixed"})," in terms of their numbers and the geographic regions that they encompass. For US Chapters, we can change the set of chapters by changing the entries in the ChapterZipMap. For example, while our initial approach is to implement a one-to-one correspondence between US chapters and US counties, we could in future change the ChapterZipMap so that a single US county could have multiple Chapters, or multiple counties could be combined into a single Chapter, or some other approach. (Changing chapter geographic boundaries requires more than just changing the ChapterZipMap; the point here is that our representation does not lock us in to our initial definition for Chapters.) The only hard constraint is that each postal code is assigned to one and only one Chapter."]}),(0,a.jsxs)(t.p,{children:["ChapterIDs have the format ",(0,a.jsx)(t.code,{children:"chapter-<country>-<chapterCode>"}),'.  In the case of a US Chapter, an example Chapter ID is: "chapter-US-001".  In the case of a non-US Chapter, an example Chapter ID is "chapter-CA-V6K1G8".']}),(0,a.jsx)(t.p,{children:"To support readability in this document, we will use US chapters and the chapterCodes will be numeric."}),(0,a.jsx)(t.h3,{id:"user-registration-and-chapter-assignment",children:"User registration and chapter assignment"}),(0,a.jsx)(t.p,{children:'New user registration works as follows. If they supply "US" as their country code, then the system will query the ChapterZipMap collection to determine their chapterID based on the postal (zip) code that they also supply.  If no Chapter entity exists yet with that chapterID, it will be created with the chapterID provided by the ChapterZipMap collection.'}),(0,a.jsxs)(t.p,{children:["If the new user supplies a non-US country code, then the ChapterZipMap is not consulted. Instead, the chapterID is defined as ",(0,a.jsx)(t.code,{children:"chapter-<country code>-<postal code>"}),". If no Chapter entity exists yet corresponding to that ChapterID, then it will be created."]}),(0,a.jsxs)(t.p,{children:["Note that ",(0,a.jsx)(t.a,{href:"https://tosbourn.com/list-of-countries-without-a-postcode/",children:"some countries do not have a postal code"}),'. In this case, we will create a default postal code (i.e. "000") for those countries and not request it from the user if they select one of those countries. This implies that for those countries, there will be only one chapter for the entire country. Since most of those countries are pretty small, that seems like a reasonable design decision.']})]}),"\n",(0,a.jsx)(t.h3,{id:"chapterid-as-firebase-index",children:"ChapterID as Firebase index"}),"\n",(0,a.jsx)(t.p,{children:"As will be seen, many entities contain a chapterID field.  When a client retrieves data from Firebase, it will normally request all of the documents where the chapterID field is the one associated with their chapter. This is the primary way in which GGC can scale. For this to work effectively, we must define an index on the chapterID field for all collections in which the entities have that field."}),"\n",(0,a.jsx)(t.h3,{id:"chapter-entity-representation",children:"Chapter entity representation"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-dart",children:"const factory Chapter(\n  {required String chapterID,        // 'chapter-US-001', or 'chapter-CA-V6K1G8'\n  required String name,              // 'Whatcom-WA', or 'CA-V6K1G8'\n  required String countryCode,       // 'US', 'CA'\n  required List<String> postalCodes}  // ['98225', '98226'], or ['V6K1GB']\n)\n"})}),"\n",(0,a.jsx)(t.h2,{id:"user",children:"User"}),"\n",(0,a.jsx)(t.p,{children:"A User entity is created for all the people who have created an account with the system."}),"\n",(0,a.jsx)(t.h3,{id:"user-entity-representation",children:"User entity representation"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-dart",children:"const factory User(\n  {required String userID,   // 'johnson@hawaii.edu'\n  required String chapterID, // 'chapter-US-001'\n  required String name,      // 'Philip Johnson'\n  required String username,  // '@fiveoclockphil'\n  required String country,   // 'US'\n  required String postalCode, // '98225'\n  required String uid,       // '22e9fe1b-445c-4523-89c2-4450244f1959'\n  String? themeMode,\n  String? themeName,\n  Map<String, DateTime>? lastReadMap,\n  String? pictureURL        // null, or 'https://firebasestorage.googleapis...'\n})\n"})}),"\n",(0,a.jsx)(t.h3,{id:"userid-management",children:"UserID management"}),"\n",(0,a.jsx)(t.p,{children:"UserIDs are the email addresses of the user. We obtain the email as part of registration."}),"\n",(0,a.jsx)(t.h3,{id:"user-onboarding",children:"User onboarding"}),"\n",(0,a.jsx)(t.p,{children:"After a user successfully registers with the system using the Firebase authentication procedures, they are logged in.  Whenever a user logs in, the system checks to see if there is a User document associated with the email address of the currently logged in user. If there is no User document for that email, then the system displays an Onboarding screen."}),"\n",(0,a.jsx)(t.p,{children:"The onboarding screen is essentially a form that must be successfully filled out in order for the logged in user to proceed to their home page (as well as to any other areas of the application)."}),"\n",(0,a.jsx)(t.p,{children:"Once the form is successfully filled out, a User and Gardener document is created for that email address. If those documents are created successfully, then the application displays the Home screen for that User."}),"\n",(0,a.jsx)(t.h2,{id:"gardener",children:"Gardener"}),"\n",(0,a.jsx)(t.p,{children:"Every Gardener instance has a corresponding User instance, and vice-versa."}),"\n",(0,a.jsxs)(t.admonition,{title:"What? So why have a Gardener entity in addition to a User entity?",type:"info",children:[(0,a.jsx)(t.p,{children:'In the original design of GGC, we distinguished between "Users" (who are gardeners who created gardens in the Chapter) and "Gardeners" (who could be users or "vendors" who produce seeds used by Users in the Chapter, but don\'t necessarily have a gardener in the chapter, and who would not be a User in the sense of having downloaded the app.).'}),(0,a.jsx)(t.p,{children:"We have discovered that the explicit representation of vendors and their associated seeds created too much UI complexity.  The current version of the system has eliminated the representation of vendors. However, for the time being, we are retaining the Gardener entity, even though there is now a one-to-one correspondence between Users and Gardeners and it would be possible to represent the information within a single entity."})]}),"\n",(0,a.jsx)(t.h3,{id:"gardener-entity-representation",children:"Gardener entity representation"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-dart",children:"const factory Gardener(\n  {required String gardenerID,             // 'johnson@hawaii.edu'\n  required String chapterID,               // 'chapter-US-001'\n  required List<String> cachedCropIDs,     // ['crop-US-001-203-9987']\n  required List<String> cachedVarietyIDs,  // ['variety-US-001-305-8765']\n  required String country,                 // 'US'\n  required String postalCode,              // '98225'\n  required List<String> attestations\n  })\n"})}),"\n",(0,a.jsx)(t.h3,{id:"cached-values",children:"Cached values"}),"\n",(0,a.jsx)(t.p,{children:'We want to provide information about Gardeners such as the crops and varieties that they are growing in the Index screens, and for performance reasons, we want to provide this information without having to retrieve all the Planting instances associated with their gardens. To do this, we "cache" the cropIDs and varietyIDs associated with this Gardener in this entity.'}),"\n",(0,a.jsx)(t.p,{children:'By "associated", we mean the crops and varieties in the garden(s) for which this gardener is an owner.'}),"\n",(0,a.jsx)(t.h3,{id:"badge-attestations",children:"Badge attestations"}),"\n",(0,a.jsx)(t.p,{children:'Certain badges require Gardeners to "attest" to having performed activities. The Gardener entity contains an attestations field that holds strings indicating what has been attested to.'}),"\n",(0,a.jsx)(t.h3,{id:"gardenerid-management",children:"GardenerID management"}),"\n",(0,a.jsx)(t.p,{children:"GardenerIDs are the email addresses of the gardener. In the case of registered users, the UserID is the same as the GardenerID."}),"\n",(0,a.jsx)(t.h2,{id:"garden",children:"Garden"}),"\n",(0,a.jsx)(t.p,{children:"The Garden entity represents a plot of land (or maybe even just some pots) that can hold Plantings over one or more years."}),"\n",(0,a.jsx)(t.h3,{id:"garden-entity-representation",children:"Garden entity representation"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-dart",children:"const factory Garden(\n  {required String gardenID,                // 'garden-US-98225-101-4567'\n  required String chapterID,                // 'chapter-US-001'\n  required String name,                     // 'Kale is for Kids'\n  required String ownerID,                  // 'jessie@gmail.com'\n  required List<String> cachedCropIDs,      // ['crop-US-001-201-9876']\n  required List<String> cachedVarietyIDs,   // ['variety-US-001-302-7865']\n  required List<int> cachedYears,           // [2023, 2022]\n  required int cachedNumPlantings,          // 231\n  required List<String> attestations,      // ['ClimateVictory', 'PesticideFree', 'CommunityOrSchool']\n  String? pictureURL,                       // null, 'https://firebasestorage.googleapis.com/v0/...'\n  String? plotPlanURL,                      // null, 'https://firebasestorage.googleapis.com/v0/...' \n  DateTime? lastUpdate,                    // null (for vendors), '2023-03-19T12:19:14.164090'\n  })\n"})}),"\n",(0,a.jsx)(t.h3,{id:"gardenid-management",children:"GardenID management"}),"\n",(0,a.jsx)(t.p,{children:"GardenIDs are generated dynamically when a Chapter member defines a new Garden or when a Chapter member defines a new Vendor (which implicitly results in the creation of a new Garden)."}),"\n",(0,a.jsxs)(t.p,{children:["GardenIDs have the format ",(0,a.jsx)(t.code,{children:"garden-<country>-<postalCode>-<gardenNum>-<millis>"}),". Please see the ",(0,a.jsx)(t.a,{href:"/docs/develop/design/ids",children:"ID Design Pattern documentation"})," for details regarding our approach to ID management."]}),"\n",(0,a.jsx)(t.p,{children:"The GardenID embeds the country code and postal code associated with the ownerID. Note that this might not be the same postal code as the one associated with the physical location of the garden!  We do this in order to ensure that if a Chapter's set of postal codes is reorganized, then the Gardens owned by a Gardener will always end up in the same Chapter as their owner."}),"\n",(0,a.jsx)(t.h3,{id:"cached-values-1",children:"Cached values"}),"\n",(0,a.jsx)(t.p,{children:"Each Garden entity caches the CropIDs, VarietyIDs, years, and the number of Plantings. This allows the Index screens to show this information about Gardens without needing to retrieve and process Plantings."}),"\n",(0,a.jsx)(t.p,{children:"In addition, whenever there is a change to the Plantings associated with this Garden, the lastUpdated field is set to the current time.  This allows the community to see which Gardens in their Chapter are active."}),"\n",(0,a.jsx)(t.h3,{id:"badge-attestations-1",children:"Badge attestations"}),"\n",(0,a.jsx)(t.p,{children:'Certain badges require Gardeners to "attest" to their Garden having certain properties. The Garden entity contains an attestations field with strings indicating the properties that they have attested to.'}),"\n",(0,a.jsx)(t.h2,{id:"editor",children:"Editor"}),"\n",(0,a.jsx)(t.p,{children:'The owner of a Garden can add other Chapter members as "editors", which enables those users to edit the Plantings and other information associated with a Garden.'}),"\n",(0,a.jsx)(t.p,{children:"There are some things Editors cannot do. For example, they cannot delete the garden. Only the owner can do that."}),"\n",(0,a.jsx)(t.p,{children:"To earn a Gardener Badge, only the data associated with Gardens that you own is used. Being an Editor on a Garden does not support Badge processing."}),"\n",(0,a.jsx)(t.p,{children:"In addition, when displaying the Crops and Varieties associated with a Gardener, only those Crops and Varieties for the Gardens that you own are displayed.  The Crops and Varieties for Gardens for which you are an Editor are not included."}),"\n",(0,a.jsx)(t.h3,{id:"editor-entity-representation",children:"Editor entity representation"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-dart",children:"const factory Editor(\n  {required String editorID,         // 'editor-US-98225-102-001-5231'\n  required String gardenID,          // 'garden-US-98225-102-6789'\n  required String chapterID,         // 'chapter-US-001'\n  required String gardenerID}        // 'johnson@hawaii.edu'\n)\n"})}),"\n",(0,a.jsx)(t.h3,{id:"editorid-management",children:"EditorID management"}),"\n",(0,a.jsx)(t.p,{children:"Editor entities are created or deleted when the owner of a Garden edits the Editor field of the Garden Details form."}),"\n",(0,a.jsxs)(t.p,{children:["EditorIDs have the format ",(0,a.jsx)(t.code,{children:"editor-<country>-<postalCode>-<gardenNum>-<editorNum>-<millis>"}),". Please see the ",(0,a.jsx)(t.a,{href:"/docs/develop/design/ids",children:"ID Design Pattern documentation"})," for details regarding our approach to ID management."]}),"\n",(0,a.jsx)(t.h2,{id:"bed",children:"Bed"}),"\n",(0,a.jsx)(t.p,{children:"Each Garden consists of one or more Beds. Creating a new Garden requires that a Bed for that Garden be defined as well. An owner can edit the name of an existing Bed, and can add a new Bed to a Garden, but cannot delete a Bed if there are any Plantings associated with it."}),"\n",(0,a.jsx)(t.h3,{id:"bed-entity-representation",children:"Bed entity representation"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-dart",children:" const factory Bed(\n  {required String bedID,          // 'bed-US-98225-101-001-5634'\n  required String chapterID,       // 'chapter-US-001'\n  required String gardenID,        // 'garden-US-98225-101-6789'\n  required String name,            // '02'\n  String? gardenerID,              // The owner of the garden, i.e. 'johnson@hawaii.edu'.\n  }              \n)\n"})}),"\n",(0,a.jsx)(t.h3,{id:"bedid-management",children:"BedID management"}),"\n",(0,a.jsxs)(t.p,{children:["BedIDs have the format ",(0,a.jsx)(t.code,{children:"bed-<country>-<postalCode>-<gardenNum>-<bedNum>-<millis>"}),". Please see the ",(0,a.jsx)(t.a,{href:"/docs/develop/design/ids",children:"ID Design Pattern documentation"})," for details regarding our approach to ID management."]}),"\n",(0,a.jsx)(t.h2,{id:"family",children:"Family"}),"\n",(0,a.jsx)(t.p,{children:'The Family entity specifies the botanical family associated with one or more Crops (and implicitly, Varieties). For example, the "Nightshade" family groups together Tomatoes, Potatoes, and Peppers. Each Crop is associated with exactly one Family.'}),"\n",(0,a.jsx)(t.p,{children:"Family data is useful to facilitate planning issues including crop rotation and companion planting. However, in Release 1.0, we do not provide any explicit support for rotation or companion planning."}),"\n",(0,a.jsx)(t.p,{children:'The Family entity is a "global" collection in GGC. In other words, it does not include a ChapterID; every Chapter will download this collection, and it cannot be edited except by developers.'}),"\n",(0,a.jsx)(t.h3,{id:"family-entity-representation",children:"Family entity representation"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-dart",children:"const factory Family(\n  {required String familyID,       // 'family-001'\n  required String formal,          // 'Amryllidaceae'\n  required String common,          // 'Allium'\n  required String examples}        // 'onion, leek, garlic, shallot'\n)\n"})}),"\n",(0,a.jsx)(t.h3,{id:"familyid-management",children:"FamilyID management"}),"\n",(0,a.jsxs)(t.p,{children:["FamilyIDs have the format ",(0,a.jsx)(t.code,{children:"family-<familyNum>"}),". The set of Family entity documents is defined in advance by GGC developers, and editing this collection requires direct interaction with the database."]}),"\n",(0,a.jsx)(t.h2,{id:"crop",children:"Crop"}),"\n",(0,a.jsx)(t.p,{children:'The Crop entity specifies a type of plant independent of its Variety. For example, "Tomato" is a Crop, while "Big Boy Tomato" is a specific Variety of Tomato.'}),"\n",(0,a.jsx)(t.p,{children:"Each Crop is associated with exactly one Family entity.  A Crop can be associated with many Varieties."}),"\n",(0,a.jsx)(t.p,{children:"Crop instances can currently be defined by any User."}),"\n",(0,a.jsxs)(t.admonition,{title:"Crops and Varieties are global",type:"warning",children:[(0,a.jsx)(t.p,{children:"Crops (and Varieties) are currently global entities. This has both positive and negative implications for the user experience."}),(0,a.jsx)(t.p,{children:"The positive implication is that new Chapter startup is much easier, since each Chapter has access to all the Crops and Varieties defined by all other Chapters. It also means that the overhead of Crop (and Variety) definition is distributed across all chapters."}),(0,a.jsx)(t.p,{children:'However, the negative implication is "noise": there can be a non-trivial number of Crops and Varieties that (perhaps due to environmental reasons) might never be grown in a Chapter. This goes against the "hyper-local" philosophy of GGC.'}),(0,a.jsx)(t.p,{children:"For 2025, we are punting on this issue, since we are only supporting two Chapters that are geographically adjacent.  However, we view this as an important design issue to be resolved if GGC is successful and scales to many Chapters, some of whom are geographically distant from each other."})]}),"\n",(0,a.jsx)(t.h3,{id:"crop-entity-representation",children:"Crop entity representation"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-dart",children:"const factory Crop(\n  {required String cropID,        // 'crop-US-001-201-3452'\n  required String chapterID,      // 'chapter-US-001'\n  required String familyID,       // 'family-001'\n  required String name,           // 'Tomato'\n  DateTime? createdAt\n  }           \n)\n"})}),"\n",(0,a.jsx)(t.h3,{id:"cropid-management",children:"CropID management"}),"\n",(0,a.jsxs)(t.p,{children:["CropIDs have the format ",(0,a.jsx)(t.code,{children:"crop-<country>-<chapterCode>-<cropNum>-<millis>"}),". Please see the ",(0,a.jsx)(t.a,{href:"/docs/develop/design/ids",children:"ID Design Pattern documentation"})," for details regarding our approach to ID management."]}),"\n",(0,a.jsx)(t.p,{children:"CropIDs currently embed the defining user's country code and chapterCode. However, unlike other entities where the country code and chapter code can be used to filter the set of entity instances to download, the entire Crop collection will be downloaded."}),"\n",(0,a.jsx)(t.h2,{id:"variety",children:"Variety"}),"\n",(0,a.jsx)(t.p,{children:'Variety is a specific kind of Crop which can actually be grown, i.e. it has seeds. For example, a seed packet such as "Tomato (Sun Gold)" specifies the crop ("Tomato") and the Variety ("Sun Gold").'}),"\n",(0,a.jsx)(t.p,{children:'Every Crop is initially defined with a Variety named "Unknown".  The Unknown Variety is used to represent two situations:'}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsx)(t.li,{children:'A gardener is planning a garden, and they know they want to plant a certain Crop, but haven\'t picked the Variety yet. In this case, they might create a Planting with an "Unknown" Variety, which is intended to mean "to be determined". In this case, the Gardener will normally update the Planting with the actual Variety at a later time once they decide what Variety to plant.'}),"\n",(0,a.jsx)(t.li,{children:'A gardener was given some seeds, and was told the Crop but no one knows the actual Variety. In this case, a Planting with the "Unknown" Variety means literally "unknown", and the Gardener would not normally update the Planting\'s Variety later on.'}),"\n"]}),"\n",(0,a.jsx)(t.admonition,{type:"info",children:(0,a.jsx)(t.p,{children:"In a previous version of GGC, we provided representational mechanisms to distinguish between these two situations, but the increase in complexity did not seem to add value, so we now use this more simple representation."})}),"\n",(0,a.jsx)(t.h3,{id:"variety-entity-representation",children:"Variety entity representation"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-dart",children:"const factory Variety(\n  {required String varietyID,      // 'variety-US-001-302-7654'\n  required String chapterID,       // 'chapter-US-001'\n  required String cropID,          // 'crop-US-001-203-2354'\n  required String cachedCropName,  // 'Asparagus'\n  bool? isGold,                    // If present and set to true, the variety has \"gold\" status.\n  required String name}            // 'Jersey Knight' \n)\n"})}),"\n",(0,a.jsx)(t.h3,{id:"varietyid-management",children:"VarietyID management"}),"\n",(0,a.jsxs)(t.p,{children:["VarietyIDs have the format ",(0,a.jsx)(t.code,{children:"variety-<country>-<chapterCode>-<varietyNum>-<millis>"}),". Please see the ",(0,a.jsx)(t.a,{href:"/docs/develop/design/ids",children:"ID Design Pattern documentation"})," for details regarding our approach to ID management."]}),"\n",(0,a.jsx)(t.h2,{id:"planting",children:"Planting"}),"\n",(0,a.jsx)(t.p,{children:"A Planting represents a set of plants of the same Variety, planted in a single Bed, all with the same approximate timings (i.e. sow date, transplant date, first harvest date, etc.)."}),"\n",(0,a.jsx)(t.p,{children:"If the same Variety is planted in two different beds, then this should be represented by two Planting instances."}),"\n",(0,a.jsx)(t.h3,{id:"planting-entity-representation",children:"Planting entity representation"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-dart",children:"factory Planting(\n  {required String plantingID,   // 'planting-US-98225-102-1001-7645'\n  required String chapterID,     // 'chapter-US-001'\n  required String gardenID,      // 'garden-US-98225-102-5678'\n  required String cropID,        // 'crop-US-001-202-9432'\n  required String cachedCropName,// 'Bean'\n  required String bedID,         // 'bed-US-98225-102-003-4823'\n  required String cachedBedName, // '02'\n  required DateTime startDate,   // '2023-03-19T12:19:14.164090'\n  required DateTime pullDate,    // '2023-07-19T12:19:14.164090'\n  String? varietyID,             // 'variety-US-001-310-7645'\n  String? cachedVarietyName,     // 'Big Boy'\n  String? outcomeID,             // null, 'outcome-US-98225-102-1001-3472'\n  String? notes,                 // null, 'From Uprising Seeds'\n  DateTime? transplantDate,      // null, '2023-04-19T12:19:14.164090'\n  DateTime? firstHarvestDate,    // null, '2023-05-19T12:19:14.164090'\n  DateTime? endHarvestDate,      // null, '2023-06-19T12:19:14.164090'\n)\n"})}),"\n",(0,a.jsx)(t.h3,{id:"plantingid-management",children:"PlantingID management"}),"\n",(0,a.jsxs)(t.p,{children:["PlantingIDs have the format ",(0,a.jsx)(t.code,{children:"planting-<country>-<postalCode>-<gardenNum>-<plantingNum>-<millis>"}),". Please see the ",(0,a.jsx)(t.a,{href:"/docs/develop/design/ids",children:"ID Design Pattern documentation"})," for details regarding our approach to ID management."]}),"\n",(0,a.jsx)(t.p,{children:"The country and postal code fields in the ID must match those fields in the gardenID associated with this Planting."}),"\n",(0,a.jsx)(t.p,{children:"Since, over a period of years, a single large garden can potentially result in thousands of plantings, we use a four digit number for the plantingNum."}),"\n",(0,a.jsx)(t.h2,{id:"outcome",children:"Outcome"}),"\n",(0,a.jsx)(t.p,{children:"Outcome data is gardener-supplied information about the result of a single Planting.  We want to specify planting results in a way that:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"Is useful and actionable for gardeners,"}),"\n",(0,a.jsx)(t.li,{children:"Captures important properties of a planting,"}),"\n",(0,a.jsx)(t.li,{children:"Is relatively easy to provide,"}),"\n",(0,a.jsx)(t.li,{children:"Is interpreted in a relatively consistent manner by different gardeners,"}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:'To support these requirements, we define five outcome types: germination, yield, flavor, pest and disease resistance, and appearance. Each planting can receive a "grade" for each of these outcome types on a five point scale.  The following table presents the definitions for each scale value for each outcome type.'}),"\n",(0,a.jsxs)(t.table,{children:[(0,a.jsx)(t.thead,{children:(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.th,{}),(0,a.jsx)(t.th,{children:"1"}),(0,a.jsx)(t.th,{children:"2"}),(0,a.jsx)(t.th,{children:"3"}),(0,a.jsx)(t.th,{children:"4"}),(0,a.jsx)(t.th,{children:"5"})]})}),(0,a.jsxs)(t.tbody,{children:[(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:(0,a.jsx)(t.strong,{children:"Germination"})}),(0,a.jsxs)(t.td,{children:[(0,a.jsx)(t.strong,{children:"None."})," No germination."]}),(0,a.jsxs)(t.td,{children:[(0,a.jsx)(t.strong,{children:"Poor."})," ~25% germination."]}),(0,a.jsxs)(t.td,{children:[(0,a.jsx)(t.strong,{children:"OK."})," ~50% germination."]}),(0,a.jsxs)(t.td,{children:[(0,a.jsx)(t.strong,{children:"Good."})," ~75% germination."]}),(0,a.jsxs)(t.td,{children:[(0,a.jsx)(t.strong,{children:"Excellent."})," >90% germination.."]})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:(0,a.jsx)(t.strong,{children:"Yield"})}),(0,a.jsxs)(t.td,{children:[(0,a.jsx)(t.strong,{children:"None."})," Died and/or no food"]}),(0,a.jsxs)(t.td,{children:[(0,a.jsx)(t.strong,{children:"Poor."})," Less food than expected"]}),(0,a.jsxs)(t.td,{children:[(0,a.jsx)(t.strong,{children:"OK."})," Expected amount of food"]}),(0,a.jsxs)(t.td,{children:[(0,a.jsx)(t.strong,{children:"Good."})," More food than expected"]}),(0,a.jsxs)(t.td,{children:[(0,a.jsx)(t.strong,{children:"Excellent."})," Way more food than expected"]})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:(0,a.jsx)(t.strong,{children:"Flavor"})}),(0,a.jsxs)(t.td,{children:[(0,a.jsx)(t.strong,{children:"Bad."})," Unappealing flavor"]}),(0,a.jsxs)(t.td,{children:[(0,a.jsx)(t.strong,{children:"Poor."})," Bland flavor"]}),(0,a.jsxs)(t.td,{children:[(0,a.jsx)(t.strong,{children:"OK."})," Expected flavor."]}),(0,a.jsxs)(t.td,{children:[(0,a.jsx)(t.strong,{children:"Good."})," Enjoyable flavor"]}),(0,a.jsxs)(t.td,{children:[(0,a.jsx)(t.strong,{children:"Excellent."})," Awesome flavor."]})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:(0,a.jsx)(t.strong,{children:"Pest and disease resistance"})}),(0,a.jsxs)(t.td,{children:[(0,a.jsx)(t.strong,{children:"Very poor."})," >90% damaged"]}),(0,a.jsxs)(t.td,{children:[(0,a.jsx)(t.strong,{children:"Poor."})," ~50% damaged"]}),(0,a.jsxs)(t.td,{children:[(0,a.jsx)(t.strong,{children:"OK."})," < 25% damaged"]}),(0,a.jsxs)(t.td,{children:[(0,a.jsx)(t.strong,{children:"Good."})," Very few damaged"]}),(0,a.jsxs)(t.td,{children:[(0,a.jsx)(t.strong,{children:"Excellent."})," No damage."]})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:(0,a.jsx)(t.strong,{children:"Appearance"})}),(0,a.jsxs)(t.td,{children:[(0,a.jsx)(t.strong,{children:"Very poor."})," >90% ugly"]}),(0,a.jsxs)(t.td,{children:[(0,a.jsx)(t.strong,{children:"Poor."})," ~60% ugly"]}),(0,a.jsxs)(t.td,{children:[(0,a.jsx)(t.strong,{children:"OK."})," ~60% not ugly"]}),(0,a.jsxs)(t.td,{children:[(0,a.jsx)(t.strong,{children:"Good."})," ~60% beautiful"]}),(0,a.jsxs)(t.td,{children:[(0,a.jsx)(t.strong,{children:"Excellent."})," >90% beautiful"]})]})]})]}),"\n",(0,a.jsx)(t.p,{children:'In addition, an Outcome type can have a value of "0", which means there is no data regarding that type of outcome.'}),"\n",(0,a.jsx)(t.h3,{id:"outcome-entity-representation",children:"Outcome entity representation"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-dart",children:"const factory Outcome(\n  {required String outcomeID,         // 'outcome-US-98225-102-1001-5218'\n  required String chapterID,          // 'chapter-US-001'\n  required String gardenID,           // 'garden-US-98225-102-6789'\n  required String plantingID,         // 'planting-US-98225-102-1001-9213'\n  required String cachedCropID,       // 'crop-US-001-245-4376'\n  required String cachedVarietyID,    // 'variety-US-001-321-3214'\n  @Default(0) int germination,        // 0-5\n  @Default(0) int yieldd,             // 0-5 (yield is a reserved word)\n  @Default(0) int flavor,             // 0-5\n  @Default(0) int resistance,         // 0-5\n  @Default(0) int appearance}         // 0-5\n)\n"})}),"\n",(0,a.jsx)(t.h3,{id:"outcomeid-management",children:"OutcomeID management"}),"\n",(0,a.jsxs)(t.p,{children:["OutcomeIDs have the format ",(0,a.jsx)(t.code,{children:"outcome-<country>-<postalCode>-<gardenNum>-<outcomeNum>-<millis>"}),". Please see the ",(0,a.jsx)(t.a,{href:"/docs/develop/design/ids",children:"ID Design Pattern documentation"})," for details regarding our approach to ID management."]}),"\n",(0,a.jsx)(t.p,{children:"Each Outcome entity is associated with exactly one Planting entity.  (Note that the converse is not true: a Planting entity need not be associated with an Outcome entity, since the Gardener might not choose to record any Outcome data.)"}),"\n",(0,a.jsx)(t.h2,{id:"observation",children:"Observation"}),"\n",(0,a.jsx)(t.p,{children:"An Observation is a comment (and, typically, a picture) provided by a Gardener regarding a Garden, Bed, Crop, Variety, or Planting."}),"\n",(0,a.jsx)(t.p,{children:"The observationType field indicates the type of Observation (Garden, Bed, Crop, Variety, or Planting).  There are a number of optional fields that have values depending upon the type of Observation. So, for example, a Garden Observation will not have a bedID, cropID, varietyID, or plantingID associated with it, while a Planting Observation will have all of those entities associated with it."}),"\n",(0,a.jsx)(t.h3,{id:"observation-entity-representation",children:"Observation entity representation"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-dart",children:"const factory Observation({\n  required String observationID,     // 'observation-US-98225-102-4001-5634'\n  required String chapterID,        // 'chapter-US-001'\n  required String gardenerID,       // 'johnson@hawaii.edu'\n  required String gardenID,         // 'garden-US-98225-102-6789'\n  required String cachedGardenName, // 'Kale is for Kids'\n  required DateTime observationDate, // '2023-03-19T12:19:14.164090'\n  required DateTime lastUpdate,     // '2023-03-19T12:19:14.164090'\n  required List<String> tagIDs,    // ['tag-001-501']\n  required List<ObservationComment>\n  comments,                       // ['observation-US-98225-102-4001-001-9876']\n  required String description,    // 'First harvest of the season'\n  // Optional fields, depends upon the observationType.\n  String? observationType,        // Can be null (for now), but later required.\n  String? plantingID,             // 'planting-US-98225-102-1002-9432'\n  String? bedID,                 // 'bed-US-98225-102-1002-9432'\n  String? cropID,                // 'crop-US-98225-102-1002-9432'\n  String? varietyID,             // 'variety-US-98225-102-1002-9432'\n  String? pictureURL,           // null, 'https://firebasestorage....'\n  String? cachedCropID,         // 'crop-US-001-243-3425'\n  String? cachedVarietyID,      // 'variety-US-001-323-9654'\n  String? cachedBedName,        // '03'\n  String? cachedCropName,       // 'Tomato'\n  String? cachedVarietyName,    // 'Cherokee Purple'\n  DateTime? cachedStartDate,    // '2023-03-19T12:19:14.164090'\n  @Default(false) bool isPrivate, // true, false\n  DateTime? createdAt}\n)\n"})}),"\n",(0,a.jsx)(t.h3,{id:"observationid-management",children:"ObservationID management"}),"\n",(0,a.jsxs)(t.p,{children:["ObservationIDs have the format ",(0,a.jsx)(t.code,{children:"observation-<country>-<postalCode>-<gardenNum>-<observationNum>-<millis>"}),". Please see the ",(0,a.jsx)(t.a,{href:"/docs/develop/design/ids",children:"ID Design Pattern documentation"})," for details regarding our approach to ID management."]}),"\n",(0,a.jsx)(t.h3,{id:"observation-comments",children:"Observation Comments"}),"\n",(0,a.jsx)(t.p,{children:"As shown above, each Observation entity includes an embedded (potentially empty) list of ObservationComments, which have this structure:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-dart",children:"const factory ObservationComment(\n  {required String observationCommentID,   // 'observationcomment-US-98225-102-4001-001-4532'\n  required String gardenerID,              // 'johnson@hawaii.edu'\n  required String description,             // 'Is that an aphid on the left leaf?'\n  required DateTime lastUpdate}            // '2023-03-19T12:19:14.164090'          \n)\n"})}),"\n",(0,a.jsx)(t.p,{children:"The lastUpdate field indicates when the comment was made or updated."}),"\n",(0,a.jsx)(t.h2,{id:"tag",children:"Tag"}),"\n",(0,a.jsx)(t.p,{children:'The Tag entity provides "meta-data" that a gardener can use to provide information about the nature of an Observation.  Tags serve two basic purposes:'}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsx)(t.p,{children:"Filtering. A user can specify a set of Tags and filter the Observations by those that satisfy either (both?) of them."}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsx)(t.p,{children:"Badge achievement. Many Badges are earned, at least in part, by posting (public) Observations with specific Tags."}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:'Tags, like Badges, Families, and Chapters, are "global" entities that are not Chapter-specific. Therefore, they can only be managed by system admins.'}),"\n",(0,a.jsx)(t.h3,{id:"tag-entity-representation",children:"Tag entity representation"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-dart",children:"const factory Tag(\n  {required String tagID,          // 'tag-001'\n  required String name,            // '#Biodiversity'\n  required String description}     // 'Use of practices to increase biodiversity...'\n)\n"})}),"\n",(0,a.jsx)(t.h3,{id:"tagid-management",children:"TagID management"}),"\n",(0,a.jsxs)(t.p,{children:["TagIDs have the format ",(0,a.jsx)(t.code,{children:"tag-<tagNum>"}),". Please see the ",(0,a.jsx)(t.a,{href:"/docs/develop/design/ids",children:"ID Design Pattern documentation"})," for details regarding our approach to ID management."]}),"\n",(0,a.jsx)(t.h2,{id:"task",children:"Task"}),"\n",(0,a.jsx)(t.p,{children:"A Task specifies an activity to perform for a specific Planting in a specific Garden. There are two  types of tasks:"}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["An ",(0,a.jsx)(t.em,{children:"automatically created"})," Task that is generated from the dates associated with a Planting, such as ",(0,a.jsx)(t.code,{children:"transplant date"})," or ",(0,a.jsx)(t.code,{children:"first harvest date"}),". Whenever the Gardener adjusts the dates associated with a Planting, the associated Task is updated. Conversely, if a Gardener adjusts the date associated with a Task, then the associated Planting date is updated as well."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["A ",(0,a.jsx)(t.em,{children:"manually created"})," Task created by a gardener, such as ",(0,a.jsx)(t.code,{children:"Weed cucumbers"})," or ",(0,a.jsx)(t.code,{children:"Add top dressing to radishes"}),"."]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:'Tasks are ephemeral.  When a Gardener indicates that a task has been completed, it is deleted from the system. For automatically created Tasks that are associated with a Planting date, the system prompts the gardener to verify the completion date prior to deleting the Task.  This prompt is used to update the date in the Planting instance.  This is an important form of "quality assurance" for Planting dates, since the Gardener typically specifies these dates early in the season during planning. The ability of Tasks to help ensure that Planting dates are accurate can make Chapter data more useful.'}),"\n",(0,a.jsxs)(t.admonition,{title:"Non-ephemeral (manually generated) tasks would be cool",type:"info",children:[(0,a.jsx)(t.p,{children:'Currently, all tasks are ephemeral. It would be potentially useful for a Gardener to be able to mark a manually generated Task as "non-ephemeral". This would mean that if the Gardener plans a future Garden, that task could be retrieved and associated with a new Planting.'}),(0,a.jsx)(t.p,{children:"We will leave this as a feature for a future release."})]}),"\n",(0,a.jsx)(t.h3,{id:"task-entity-representation",children:"Task entity representation"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-dart",children:"factory Task(\n  {required String taskID,          // 'task-US-98225-101-1003-001-7634' \n  required String chapterID,        // 'chapter-US-001'\n  required String gardenID,         // 'garden-US-98225-101-6789'\n  required String taskType,         // 'start'\n  required String title,            // 'Start Tomato (Big Boy)'\n  String? gardenerID,              // The owner of the garden, i.e. 'johnson@hawaii.edu'.\n  String? description,              // null, 'Clean up ground cherries.'\n  required String cropID,           // 'crop-US-001-203-5412'\n  required String varietyID,        // 'variety-US-001-101-304-6534'\n  required String bedID,            // 'bed-US-98225-101-003-8956'\n  required String plantingID,       // 'planting-US-98225-101-1003-3214'\n  required DateTime dueDate,        // '2023-03-19T12:19:14.164090'\n  required String cachedBedName,    // '02'\n  required String cachedCropName,   // 'Tomato'\n  required String cachedVarietyName} // 'Kale is for Kids'\n)\n"})}),"\n",(0,a.jsx)(t.h3,{id:"taskid-management",children:"TaskID management"}),"\n",(0,a.jsxs)(t.p,{children:["TaskIDs have the format ",(0,a.jsx)(t.code,{children:"task-<country>-<postalCode>-<gardenNum>-<plantingNum>-<taskNum>-<millis>"}),". Please see the ",(0,a.jsx)(t.a,{href:"/docs/develop/design/ids",children:"ID Design Pattern documentation"})," for details regarding our approach to ID management."]}),"\n",(0,a.jsx)(t.h3,{id:"task-types",children:"Task Types"}),"\n",(0,a.jsx)(t.p,{children:"Each Task has a TaskType:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-dart",children:"enum TaskType { start, transplant, firstHarvest, endHarvest, pull, other }\n"})}),"\n",(0,a.jsx)(t.p,{children:'The first five correspond to the Planting dates. "Other" is used for manually created Tasks.'}),"\n",(0,a.jsx)(t.h3,{id:"task-titles-and-descriptions",children:"Task titles and descriptions"}),"\n",(0,a.jsx)(t.p,{children:'For automatically generated tasks, the title is automatically generated using the task type plus the variety, for example "Start Tomato (Big Boy)".  Automatically generated tasks are not created with a description.'}),"\n",(0,a.jsx)(t.p,{children:"For manually generated tasks, the Gardener must specify the title and can also supply a description if desired."}),"\n",(0,a.jsx)(t.h2,{id:"badge",children:"Badge"}),"\n",(0,a.jsx)(t.p,{children:'GGC provides a game mechanic called "Badges". These are designations for Gardens, Gardeners, and (in future) Chapters that recognize the use of best practices for gardening (such as composting), or significant experience with a specific crop, or other behaviors that we wish to encourage.'}),"\n",(0,a.jsx)(t.p,{children:'The Badge game mechanic is implemented through two entities: "Badge" and "BadgeInstance". The Badge entity is a global entity (i.e. independent of any Chapter and defined by the system), and defines the game mechanic.  The BadgeInstance entity represents the achievement of a Badge by a Garden, Gardener, or (in future) Chapter.'}),"\n",(0,a.jsx)(t.h3,{id:"badge-entity-representation",children:"Badge entity representation"}),"\n",(0,a.jsx)(t.p,{children:"Badges:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-dart",children:"const factory Badge(\n  {required String badgeID,       // 'badge-001'\n  required String type,           // 'garden'\n  required String name,           // 'Climate Victory'\n  required String criteria,       // 'A climate victory garden has been...' \n  required String level1,         // 'The garden is present...'\n  required String level2,         // 'The garden is present..., and...'\n  required String level3,         // 'The garden is present..., and..., and...'\n  required List<String> tagIDs}   // ['tag-024', 'tag-037']\n)\n"})}),"\n",(0,a.jsx)(t.p,{children:"Badge Instances:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-dart",children:"const factory BadgeInstance(\n  {required String badgeInstanceID,  // 'badgeinstance-US-001-001-5634'\n  required String chapterID,         // 'chapter-US-001'\n  required String badgeID,           // 'badge-001'\n  required int level,                // 1\n  required String id,                // 'johnson@hawaii.edu', 'garden-US-98225-101-6789', 'chapter-US-001'\n  required String type,              // 'gardener', 'garden', 'chapter'\n  required String cachedName,        // 'Climate Victory'\n  String? data,                      // null, 'supplementary data'\n  String? data2,                     // null, 'supplementary data2'\n  String? data3}                     // null, 'supplementary data3'\n)\n"})}),"\n",(0,a.jsx)(t.h3,{id:"badgeid-and-badgeinstanceid-management",children:"BadgeID and BadgeInstanceID management"}),"\n",(0,a.jsxs)(t.p,{children:["BadgeIDs have the format ",(0,a.jsx)(t.code,{children:"badge-<badgeNum>"}),". Please see the ",(0,a.jsx)(t.a,{href:"/docs/develop/design/ids",children:"ID Design Pattern documentation"})," for details regarding our approach to ID management."]}),"\n",(0,a.jsxs)(t.p,{children:["BadgeInstanceIDs have the format ",(0,a.jsx)(t.code,{children:"badgeinstance-<country>-<chapterCode>-<badgeinstanceNum>-<millis>"}),"."]}),"\n",(0,a.jsx)(t.h2,{id:"chatroomschatusers",children:"ChatRooms/ChatUsers"}),"\n",(0,a.jsxs)(t.p,{children:["We use the ",(0,a.jsx)(t.a,{href:"https://pub.dev/packages/flutter_chat_ui",children:"Flutter Chat UI"})," package to implement Chat rooms and users. This results in the addition of some collections to Firebase. Please refer to that documentation for details."]})]})}function c(e={}){const{wrapper:t}={...(0,i.a)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}},1151:(e,t,n)=>{n.d(t,{Z:()=>o,a:()=>s});var a=n(7294);const i={},r=a.createContext(i);function s(e){const t=a.useContext(r);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),a.createElement(r.Provider,{value:t},e.children)}}}]);