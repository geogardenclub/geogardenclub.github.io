"use strict";(self.webpackChunkgeogardenclub_github_io=self.webpackChunkgeogardenclub_github_io||[]).push([[8392],{9987:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>u,frontMatter:()=>r,metadata:()=>l,toc:()=>s});var i=t(5893),d=t(1151);const r={hide_table_of_contents:!0},a="Input Fields",l={id:"develop/design/input-fields",title:"Input Fields",description:"Motivation",source:"@site/docs/develop/design/input-fields.md",sourceDirName:"develop/design",slug:"/develop/design/input-fields",permalink:"/docs/develop/design/input-fields",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{hide_table_of_contents:!0},sidebar:"developSidebar",previous:{title:"Badges",permalink:"/docs/develop/design/badges"},next:{title:'"With" widgets',permalink:"/docs/develop/design/with-widgets"}},o={},s=[{value:"Motivation",id:"motivation",level:2},{value:"Background: Form Builder Input Fields",id:"background-form-builder-input-fields",level:2},{value:"Custom Field Example",id:"custom-field-example",level:2},{value:"GGC Input Fields",id:"ggc-input-fields",level:2},{value:"Predefined Field Keys",id:"predefined-field-keys",level:3},{value:"GGC Input fields in forms",id:"ggc-input-fields-in-forms",level:2},{value:"GGC Input field outside of forms",id:"ggc-input-field-outside-of-forms",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"input-fields",children:"Input Fields"})}),"\n",(0,i.jsx)(n.h2,{id:"motivation",children:"Motivation"}),"\n",(0,i.jsxs)(n.p,{children:["GGC uses the ",(0,i.jsx)(n.a,{href:"https://pub.dev/packages/flutter_form_builder",children:"Flutter Form Builder"})," package to support data collection from gardeners. Flutter Form Builder simplifies form-based data collection by reducing the code needed to: (a) build a form, (b) validate fields, (c) react to changes, and (d) collect final user input."]}),"\n",(0,i.jsx)(n.p,{children:"While this is great, Flutter Form Builder does not, by itself, accomplish two additional important design goals for GGC:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Provide specialized widgets for commonly used GGC data input fields. For example, a dropdown displaying the names of all gardens associated with this user; and"}),"\n",(0,i.jsx)(n.li,{children:"Provide a single location for specifying the look-and-feel for input fields.  We want to minimize the amount of duplicated code (and hopefully eliminate look-and-feel code) when creating a form to collect data in a screen."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:'There is a third design goal as well.  GGC sometimes wants to use input fields outside the context of a "form"---i.e. a context in which data is gathered but not made available to the system until a "Submit" button is pressed. For example, the Outcome screen has input fields to select a garden, crop, and/or variety, and as these fields are manipulated by the user, the screen immediately refreshes to show Outcome data filtered by the values of the input fields. There is no "Submit" button in this screen, and so some of the Flutter Form Builder mechanisms are not used. The third design goal is:'}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Support both in-form and outside-form contexts without having to create two separate Garden dropdown widgets (for example)."}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["To support these three design goals, GGC provides a set of custom input fields (in the ",(0,i.jsx)(n.code,{children:"lib/features/common/input-fields directory"}),'). We call these "GGC Input Fields" to distinguish them from "Form Builder Input Fields".']}),"\n",(0,i.jsx)(n.p,{children:"The goal of this page is to document how GGC Input Fields are created and used in order to facilitate their future evolution."}),"\n",(0,i.jsx)(n.h2,{id:"background-form-builder-input-fields",children:"Background: Form Builder Input Fields"}),"\n",(0,i.jsxs)(n.p,{children:["A good overview of Form Builder Input Fields and their use is available in the ",(0,i.jsx)(n.a,{href:"https://pub.dev/packages/flutter_form_builder",children:"Flutter Form Builder Readme"}),". As noted in the ",(0,i.jsx)(n.a,{href:"https://pub.dev/packages/flutter_form_builder#parameters",children:"Parameters section"}),", there are several attributes that all Form Builder Input Fields support. In many cases, a GGC Input Field will provide a value for these standard attributes:"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Form Builder Input Field Attribute"}),(0,i.jsx)(n.th,{children:"GGC Input Field Value"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"name"}),(0,i.jsx)(n.td,{children:'The input field name, i.e. "New Garden Name", "Garden Dropdown", etc.'})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"initialValue"}),(0,i.jsx)(n.td,{children:"Not typically needed."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"enabled"}),(0,i.jsx)(n.td,{children:"Same default (true)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"decoration"}),(0,i.jsx)(n.td,{children:"Provided: implements standard border, icons, and styles across all GGC input fields"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"validator"}),(0,i.jsx)(n.td,{children:'Provided as needed. For example, the "New Garden Name" input field will validate that the provided string does not match any other garden name (case-insensitive, spaces and special characters removed).'})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"onChanged"}),(0,i.jsx)(n.td,{children:"Made available in case input field is used outside of a form"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"valueTransformer"}),(0,i.jsx)(n.td,{children:"A function might be provided for some GGC Input Fields, not sure yet."})]})]})]}),"\n",(0,i.jsx)(n.p,{children:'Let\'s look at a simple Form using Form Builder, which displays two text fields ("Email" and "Password") and a "Login" button.'}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-dart",children:"final _formKey = GlobalKey<FormBuilderState>();\n\nFormBuilder(\n  key: _formKey,\n  child: Column(\n    children: [\n      FormBuilderTextField(\n        key: _emailFieldKey,\n        name: 'email',\n        decoration: const InputDecoration(labelText: 'Email'),\n        validator: FormBuilderValidators.compose([\n          FormBuilderValidators.required(),\n          FormBuilderValidators.email(),\n        ]),\n      ),\n      const SizedBox(height: 10),\n      FormBuilderTextField(\n        name: 'password',\n        decoration: const InputDecoration(labelText: 'Password'),\n        obscureText: true,\n        validator: FormBuilderValidators.compose([\n          FormBuilderValidators.required(),\n        ]),\n      ),\n      MaterialButton(\n        color: Theme.of(context).colorScheme.secondary,\n        onPressed: () {\n          if (_formKey.currentState?.saveAndValidate() ?? false) {\n            debugPrint('validation succeeded');\n            debugPrint(_formKey.currentState?.value.toString());\n          } else {\n            debugPrint('validation failed');\n          }\n        },\n        child: const Text('Login'),\n      )\n    ],\n  ),\n),\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Form Builder provides pre-defined input fields for the following types of input controllers: Checkbox, Radio Button, Date Picker, Dropdown, Slider, Toggle, and Text Field. In addition, the ",(0,i.jsx)(n.a,{href:"https://pub.dev/packages/form_builder_extra_fields",children:"Form Builder Extra Fields"})," package provides input controllers for: Color Picker, Rating, Searchable Dropdown, Signature Pad, Spinnable Number Selector, and Text Field with Auto-Complete."]}),"\n",(0,i.jsxs)(n.p,{children:["If you want to build a custom field, there is a set of ",(0,i.jsx)(n.a,{href:"https://github.com/flutter-form-builder-ecosystem/flutter_form_builder/blob/main/example/lib/sources/custom_fields.dart",children:"Example Custom Fields"}),", as well as two how-to articles: ",(0,i.jsx)(n.a,{href:"https://medium.com/@danvickmiller/building-a-custom-flutter-form-builder-field-c67e2b2a27f4",children:"Building a Custom Field with FormBuilder Flutter Package"})," and ",(0,i.jsx)(n.a,{href:"https://medium.com/@danvickmiller/turn-any-flutter-widget-into-a-form-input-c23223042e3b",children:"Turn any widget into a Form Input"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"custom-field-example",children:"Custom Field Example"}),"\n",(0,i.jsx)(n.p,{children:"Here's a simple example of a custom field, built inline:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-dart",children:"FormBuilderField<String?>(\n  name: 'name',\n  builder: (FormFieldState field) {\n    return Autocomplete<String>(\n      optionsBuilder: (TextEditingValue textEditingValue) {\n        if (textEditingValue.text == '') {\n          return const Iterable<String>.empty();\n        }\n        return _kOptions.where((String option) {\n          return option.contains(textEditingValue.text.toLowerCase());\n          });\n        },\n      onSelected: (String selection) {\n        field.didChange(selection);\n        },\n      );\n    },\n  autovalidateMode: AutovalidateMode.always,\n  validator: (valueCandidate) {\n    if (valueCandidate?.isEmpty ?? true) {\n      return 'This field is required.';\n    }\n    return null;\n  },\n),\n"})}),"\n",(0,i.jsx)(n.p,{children:"FormBuilderField has two required fields: name, and builder. There are many optional fields, including: onSaved, initialValue, autovalidateMode, decoration, enabled, validator, valueTransformer, onChanged, and onReset."}),"\n",(0,i.jsx)(n.p,{children:"The above example has the required fields plus two fields to implement validation. The field can return either a String or null."}),"\n",(0,i.jsx)(n.h2,{id:"ggc-input-fields",children:"GGC Input Fields"}),"\n",(0,i.jsx)(n.p,{children:"The above section provides a brief introduction to generic Form Builder and Input Fields. Here is how we are building GGC-specific abstractions to address the three design requirements."}),"\n",(0,i.jsx)(n.h3,{id:"predefined-field-keys",children:"Predefined Field Keys"}),"\n",(0,i.jsx)(n.p,{children:"One assumption we can make in GGC is that a given GGC form (i.e. GardenDropdown, CropDropdown, TitleField, etc) appears only once in any given form. That means we can reduce the amount of code required to build a form by predefining field keys.  We do this in the FieldKey class, which contains a set of static fields that are initialized to a field key:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-dart",children:"/// The FieldKey associated with each GGC Input Field type.\n/// This assumes each GGC Input Field type can occur only once in a form.\nclass FieldKey {\n  static GlobalKey<FormBuilderFieldState<FormBuilderField<dynamic>, dynamic>>\n      gardenDropdown = GlobalKey<FormBuilderFieldState>();\n  static GlobalKey<FormBuilderFieldState<FormBuilderField<dynamic>, dynamic>>\n      gardenTextField = GlobalKey<FormBuilderFieldState>();\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:"This means that when you build a form using the GGC Input Fields, you do not have to create or pass a field key to an input field, as the input field will use one of these values according to the input field type.  Then, in the submit callback, you can retrieve the input field value  this way:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-dart",children:"String gardenID = FieldKey.gardenDropdown.currentState?.value;\n"})}),"\n",(0,i.jsx)(n.h2,{id:"ggc-input-fields-in-forms",children:"GGC Input fields in forms"}),"\n",(0,i.jsx)(n.p,{children:"Using a GGC Input Field in a form is really easy. For example, here is how to add a required dropdown where the user must specify a Garden:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-dart",children:"GardenDropdown(gardens: widget.gardens, chapters: widget.chapters, required: true);\n"})}),"\n",(0,i.jsx)(n.p,{children:"As implied above, the value that you can retrieve from this dropdown in the submit callback is the gardenID. From this, you can easily get the garden name (or any other garden details). For example:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-dart",children:"String gardenID = FieldKey.gardenDropdown.currentState?.value;\nString gardenName = widget.gardens.getGarden(gardenID).name;\n"})}),"\n",(0,i.jsx)(n.h2,{id:"ggc-input-field-outside-of-forms",children:"GGC Input field outside of forms"}),"\n",(0,i.jsx)(n.p,{children:"We can also use the GardenDropdown Input Field in a non-form context. For example, in the Outcomes screen accessible from the Drawer, there is a Garden dropdown such that the displayed outcomes update immediately each time a new garden is selected."}),"\n",(0,i.jsx)(n.p,{children:"To do this, the Outcomes screen must provide an onTap function which is called each time the dropdown is manipulated.  Here's is how the GardenDropdown can be called to provide this functionality:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-dart",children:"GardenDropdown(\n  gardens: widget.gardens,\n  chapters: widget.chapters,\n  gardenID: gardenID,\n  initialValue: gardenID ?? 'All',\n  addAll: true,\n  enabled: widget.gardenID == null,\n  onTap: (value) => setState(() {\n    gardenID = (value == 'All') ? null : value;\n    cropID = null;\n    varietyID = null;\n  }),\n);\n"})}),"\n",(0,i.jsx)(n.p,{children:"In this situation, we pass in an onTap method that calls setState() to update local state variables for gardenID, cropID, and varietyID. This forces a rebuild of the screen with those new state values, which in turn recomputes the outcomes to be displayed."}),"\n",(0,i.jsx)(n.p,{children:"This example illustrates how GardenDropdown achieves the three design goals:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"It is specialized for a given GGC entity. The client just passes in the gardens and chapters collection instances and GardenDropdown does the work of extracting garden names and IDs and building the dropdown object."}),"\n",(0,i.jsx)(n.li,{children:'The invocation of the GardenDropdown has no "look-and-feel" code associated with it. All of the decoration and theme data is internal.'}),"\n",(0,i.jsx)(n.li,{children:"The GardenDropdown can be used both within a form (where the data is extracted using a FormKey) or outside a form (where the data is extracted using an onTap callback)."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"(More documentation to come)"})]})}function u(e={}){const{wrapper:n}={...(0,d.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},1151:(e,n,t)=>{t.d(n,{Z:()=>l,a:()=>a});var i=t(7294);const d={},r=i.createContext(d);function a(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:a(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);